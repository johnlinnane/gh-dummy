{"ast":null,"code":"import _objectSpread from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{PureComponent}from'react';import{connect}from'react-redux';import{Link}from'react-router-dom';// create alot of actions to bring in the book info\nimport{getBook,updateBook,clearBook,deleteBook}from'../../actions';var EditBook=/*#__PURE__*/function(_PureComponent){_inherits(EditBook,_PureComponent);var _super=_createSuper(EditBook);function EditBook(){var _this;_classCallCheck(this,EditBook);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formdata:{// submit id to find post\n_id:_this.props.match.params.id,name:'',author:'',review:'',pages:'',rating:'',price:''}};_this.handleInput=function(event,name){// make a copy of formdata\nvar newFormdata=_objectSpread({},_this.state.formdata);// populate the copy with the input value\nnewFormdata[name]=event.target.value;// copy it back to state\n_this.setState({formdata:newFormdata});};_this.submitForm=function(e){e.preventDefault();// console.log(this.state.formdata);\n_this.props.dispatch(updateBook(_this.state.formdata));};_this.deletePost=function(){_this.props.dispatch(deleteBook(_this.props.match.params.id));};_this.redirectUser=function(){setTimeout(function(){_this.props.history.push('/user/user-reviews');},1000);};return _this;}_createClass(EditBook,[{key:\"componentWillMount\",// trigger getBook action\nvalue:function componentWillMount(){this.props.dispatch(getBook(this.props.match.params.id));}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){// console.log(nextProps);\nvar book=nextProps.books.book;// console.log(book);\n// can create a updatedFormdata variable, but no need\nthis.setState({formdata:{_id:book._id,name:book.name,author:book.author,review:book.review,pages:book.pages,rating:book.rating,price:book.price}});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.props.dispatch(clearBook());}},{key:\"render\",value:function render(){var _this2=this;// console.log(this.props);\nvar books=this.props.books;return/*#__PURE__*/React.createElement(\"div\",{className:\"rl_container article\"},books.updateBook?/*#__PURE__*/React.createElement(\"div\",{className:\"edit_confirm\"},\"Post updated, \",/*#__PURE__*/React.createElement(Link,{to:\"/books/\".concat(books.book._id)},\"Click here to see your post\")):null,books.postDeleted?/*#__PURE__*/React.createElement(\"div\",{className:\"red_tag\"},\"Post Deleted\",this.redirectUser()):null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.submitForm},/*#__PURE__*/React.createElement(\"h2\",null,\"Edit review\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Enter name\",value:this.state.formdata.name,onChange:function onChange(event){return _this2.handleInput(event,'name');}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Enter author\",value:this.state.formdata.author,onChange:function onChange(event){return _this2.handleInput(event,'author');}})),/*#__PURE__*/React.createElement(\"textarea\",{value:this.state.formdata.review,onChange:function onChange(event){return _this2.handleInput(event,'review');}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",placeholder:\"Enter pages\",value:this.state.formdata.pages,onChange:function onChange(event){return _this2.handleInput(event,'pages');}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"select\",{value:this.state.formdata.rating,onChange:function onChange(event){return _this2.handleInput(event,'rating');}},/*#__PURE__*/React.createElement(\"option\",{val:\"1\"},\"1\"),/*#__PURE__*/React.createElement(\"option\",{val:\"2\"},\"2\"),/*#__PURE__*/React.createElement(\"option\",{val:\"3\"},\"3\"),/*#__PURE__*/React.createElement(\"option\",{val:\"4\"},\"4\"),/*#__PURE__*/React.createElement(\"option\",{val:\"5\"},\"5\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",placeholder:\"Enter price\",value:this.state.formdata.price,onChange:function onChange(event){return _this2.handleInput(event,'price');}})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Edit review\"),/*#__PURE__*/React.createElement(\"div\",{className:\"delete_post\"},/*#__PURE__*/React.createElement(\"div\",{className:\"button\",onClick:this.deletePost},\"Delete review\"))));}}]);return EditBook;}(PureComponent);function mapStateToProps(state){// console.log(state); \nreturn{books:state.books};}export default connect(mapStateToProps)(EditBook);","map":{"version":3,"sources":["/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/src/containers/Admin/edit.js"],"names":["React","PureComponent","connect","Link","getBook","updateBook","clearBook","deleteBook","EditBook","state","formdata","_id","props","match","params","id","name","author","review","pages","rating","price","handleInput","event","newFormdata","target","value","setState","submitForm","e","preventDefault","dispatch","deletePost","redirectUser","setTimeout","history","push","nextProps","book","books","postDeleted","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\n\n// create alot of actions to bring in the book info\nimport { getBook, updateBook, clearBook, deleteBook } from '../../actions';\n\nclass EditBook extends PureComponent {\n\n\n    state = {\n        formdata:{\n            // submit id to find post\n            _id:this.props.match.params.id,\n            name:'',\n            author:'', \n            review:'',\n            pages:'',\n            rating:'',\n            price:''\n        }\n    }\n\n\n    handleInput = (event, name) => {\n        // make a copy of formdata\n        const newFormdata = {\n            ...this.state.formdata\n        }\n\n        // populate the copy with the input value\n        newFormdata[name] = event.target.value;\n\n        // copy it back to state\n        this.setState({\n            formdata:newFormdata\n        })\n    }\n\n\n    submitForm = (e) => {\n        e.preventDefault();\n        // console.log(this.state.formdata);\n\n        this.props.dispatch(updateBook(this.state.formdata))\n    }\n\n\n    deletePost = () => {\n        this.props.dispatch(deleteBook(this.props.match.params.id))\n    }\n\n\n\n    redirectUser = () => {\n        setTimeout(() => {\n            this.props.history.push('/user/user-reviews')\n        }, 1000)\n    }\n\n\n    // trigger getBook action\n    componentWillMount() {\n        this.props.dispatch(getBook(this.props.match.params.id))\n    }\n\n\n    componentWillReceiveProps(nextProps) {\n        // console.log(nextProps);\n        let book = nextProps.books.book;\n        \n        // console.log(book);\n\n        // can create a updatedFormdata variable, but no need\n        \n        this.setState({\n            formdata:{\n                _id:book._id,\n                name:book.name,\n                author:book.author,\n                review:book.review,\n                pages:book.pages,\n                rating:book.rating,\n                price:book.price \n            }\n        })\n    }\n\n    componentWillUnmount() {\n        this.props.dispatch(clearBook())\n    }\n\n    render() {\n        // console.log(this.props);\n\n        let books = this.props.books;\n\n        return (\n            <div className=\"rl_container article\">\n\n                {\n                    books.updateBook ?\n                        <div className=\"edit_confirm\">\n                            Post updated, <Link to={`/books/${books.book._id}`}>\n                                Click here to see your post\n                            </Link>\n                        </div>\n                    : null\n                }\n\n\n                {\n                    books.postDeleted ?\n                        <div className=\"red_tag\">\n                            Post Deleted\n                            {this.redirectUser()}\n                        </div>\n\n                    : null\n                }\n\n\n                <form onSubmit={this.submitForm}>\n                    \n                    <h2>Edit review</h2>\n\n                    <div className=\"form_element\">\n                        <input\n                            type=\"text\"\n                            placeholder=\"Enter name\"\n                            value={this.state.formdata.name} \n                            onChange={(event) => this.handleInput(event, 'name')}\n                        />\n                    </div>\n\n                    <div className=\"form_element\">\n                        <input\n                            type=\"text\"\n                            placeholder=\"Enter author\"\n                            value={this.state.formdata.author} \n                            onChange={(event) => this.handleInput(event, 'author')}    \n                        />\n                    </div>\n\n\n                    <textarea\n                        value={this.state.formdata.review}\n                        onChange={(event) => this.handleInput(event, 'review')}\n                    />\n\n\n                    <div className=\"form_element\">\n                        <input\n                            type=\"number\"\n                            placeholder=\"Enter pages\"\n                            value={this.state.formdata.pages} \n                            onChange={(event) => this.handleInput(event, 'pages')}                        />\n                    </div>\n\n                    <div className=\"form_element\">\n                        <select\n                            value={this.state.formdata.rating}\n                            onChange={(event) => this.handleInput(event, 'rating')}\n                        >\n                            <option val=\"1\">1</option>\n                            <option val=\"2\">2</option>\n                            <option val=\"3\">3</option>\n                            <option val=\"4\">4</option>\n                            <option val=\"5\">5</option>\n\n                        </select>\n                    </div>\n\n\n                    <div className=\"form_element\">\n                        <input\n                            type=\"number\"\n                            placeholder=\"Enter price\"\n                            value={this.state.formdata.price} \n                            onChange={(event) => this.handleInput(event, 'price')}                        />\n                    </div>\n\n\n                    <button type=\"submit\">Edit review</button>\n                    \n                    <div className=\"delete_post\">\n                        <div className=\"button\" onClick={this.deletePost}>\n                            Delete review\n                        </div>\n\n                    </div>\n\n\n\n\n                </form>\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    // console.log(state); \n    return {\n        books:state.books\n    }\n}\n\nexport default connect(mapStateToProps)(EditBook)\n\n\n"]},"metadata":{},"sourceType":"module"}