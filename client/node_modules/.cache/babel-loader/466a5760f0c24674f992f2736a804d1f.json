{"ast":null,"code":"import axios from 'axios';\nexport function getBooks(limit = 10, start = 0, order = 'asc', list = '') {\n  const request = axios.get(`/api/books?limit=${limit}&skip=${start}&order=${order}`).then(response => {\n    if (list) {\n      return [...list, ...response.data];\n    } else {\n      return response.data;\n    }\n  }); // console.log(request);\n\n  return {\n    type: 'GET_BOOKS',\n    payload: request\n  };\n} // two requests inside one action, book and user. user reduxthunk\n\nexport function getBookWithReviewer(id) {\n  // reduxthunk's dispatched function sends payload to reducers whenever we are ready\n  // as an alternative to getBooks\n  const request = axios.get(`/api/getBook?id=${id}`); // return a dispatch function\n\n  return dispatch => {\n    // get the promise, using {{{destructuring}}}\n    request.then(({\n      data\n    }) => {\n      let book = data; // console.log(book);\n\n      axios.get(`/api/getReviewer?id=${book.ownerId}`).then(({\n        data\n      }) => {\n        dispatch({\n          type: 'GET_BOOK_W_REVIEWER',\n          payload: null\n        });\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/src/actions/index.js"],"names":["axios","getBooks","limit","start","order","list","request","get","then","response","data","type","payload","getBookWithReviewer","id","dispatch","book","ownerId"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAIA,OAAO,SAASC,QAAT,CACHC,KAAK,GAAG,EADL,EAEHC,KAAK,GAAG,CAFL,EAGHC,KAAK,GAAG,KAHL,EAIHC,IAAI,GAAG,EAJJ,EAKL;AACE,QAAMC,OAAO,GAAGN,KAAK,CAACO,GAAN,CAAW,oBAAmBL,KAAM,SAAQC,KAAM,UAASC,KAAM,EAAjE,EACKI,IADL,CACUC,QAAQ,IAAI;AACd,QAAGJ,IAAH,EAAQ;AACJ,aAAO,CAAC,GAAGA,IAAJ,EAAU,GAAGI,QAAQ,CAACC,IAAtB,CAAP;AACH,KAFD,MAEO;AACH,aAAOD,QAAQ,CAACC,IAAhB;AACH;AACJ,GAPL,CAAhB,CADF,CAUE;;AAEA,SAAM;AACFC,IAAAA,IAAI,EAAC,WADH;AAEFC,IAAAA,OAAO,EAACN;AAFN,GAAN;AAIH,C,CAGD;;AACA,OAAO,SAASO,mBAAT,CAA6BC,EAA7B,EAAiC;AAEpC;AACA;AACA,QAAMR,OAAO,GAAGN,KAAK,CAACO,GAAN,CAAW,mBAAkBO,EAAG,EAAhC,CAAhB,CAJoC,CAMpC;;AACA,SAAQC,QAAD,IAAc;AACjB;AACAT,IAAAA,OAAO,CAACE,IAAR,CAAa,CAAC;AAACE,MAAAA;AAAD,KAAD,KAAY;AACrB,UAAIM,IAAI,GAAGN,IAAX,CADqB,CAErB;;AAEAV,MAAAA,KAAK,CAACO,GAAN,CAAW,uBAAsBS,IAAI,CAACC,OAAQ,EAA9C,EACKT,IADL,CACU,CAAC;AAACE,QAAAA;AAAD,OAAD,KAAY;AACdK,QAAAA,QAAQ,CAAC;AACLJ,UAAAA,IAAI,EAAC,qBADA;AAELC,UAAAA,OAAO,EAAC;AAFH,SAAD,CAAR;AAIH,OANL;AAOH,KAXD;AAYH,GAdD;AAkBH","sourcesContent":["import axios from 'axios';\n\n\n\nexport function getBooks(\n    limit = 10,\n    start = 0,\n    order = 'asc',\n    list = ''\n) {\n    const request = axios.get(`/api/books?limit=${limit}&skip=${start}&order=${order}`)\n                        .then(response => {\n                            if(list){\n                                return [...list, ...response.data]\n                            } else {\n                                return response.data\n                            }\n                        })\n\n    // console.log(request);\n\n    return{\n        type:'GET_BOOKS',\n        payload:request\n    }\n}\n\n\n// two requests inside one action, book and user. user reduxthunk\nexport function getBookWithReviewer(id) {\n\n    // reduxthunk's dispatched function sends payload to reducers whenever we are ready\n    // as an alternative to getBooks\n    const request = axios.get(`/api/getBook?id=${id}`)\n\n    // return a dispatch function\n    return (dispatch) => {\n        // get the promise, using {{{destructuring}}}\n        request.then(({data}) => {\n            let book = data;\n            // console.log(book);\n\n            axios.get(`/api/getReviewer?id=${book.ownerId}`)\n                .then(({data}) => {\n                    dispatch({\n                        type:'GET_BOOK_W_REVIEWER',\n                        payload:null\n                    })\n                })\n        })\n    }\n\n    \n\n}"]},"metadata":{},"sourceType":"module"}