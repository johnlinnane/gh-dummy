{"ast":null,"code":"import _objectSpread from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import{Link}from'react-router-dom';import{addBook,clearNewBook}from'../../actions';var AddBook=/*#__PURE__*/function(_Component){_inherits(AddBook,_Component);var _super=_createSuper(AddBook);function AddBook(){var _this;_classCallCheck(this,AddBook);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={formdata:{name:'',author:'',review:'',pages:'',rating:'',price:''}};_this.handleInput=function(event,name){// make a copy of formdata\nvar newFormdata=_objectSpread({},_this.state.formdata);// populate the copy with the input value\nnewFormdata[name]=event.target.value;// copy it back to state\n_this.setState({formdata:newFormdata});};_this.showNewBook=function(book){return book.post?/*#__PURE__*/React.createElement(\"div\",{className:\"conf_link\"},\"Cool !! \",/*#__PURE__*/React.createElement(Link,{to:\"/books/\".concat(book.bookId)},\"Click the link to see the post\")):null;};_this.submitForm=function(e){e.preventDefault();// console.log(this.state.formdata);\n// dispatch an action, adding updated  formdata + the user id from the redux store\n_this.props.dispatch(addBook(_objectSpread({},_this.state.formdata,{ownerId:_this.props.user.login.id})));};return _this;}_createClass(AddBook,[{key:\"componentWillUnmount\",// clear success message \nvalue:function componentWillUnmount(){this.props.dispatch(clearNewBook());}},{key:\"render\",value:function render(){var _this2=this;// console.log(this.props);\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"rl_container article\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.submitForm},/*#__PURE__*/React.createElement(\"h2\",null,\"Add a review\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Enter name\",value:this.state.formdata.name,onChange:function onChange(event){return _this2.handleInput(event,'name');}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Enter author\",value:this.state.formdata.author,onChange:function onChange(event){return _this2.handleInput(event,'author');}})),/*#__PURE__*/React.createElement(\"textarea\",{value:this.state.formdata.review,onChange:function onChange(event){return _this2.handleInput(event,'review');}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",placeholder:\"Enter pages\",value:this.state.formdata.pages,onChange:function onChange(event){return _this2.handleInput(event,'pages');}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"select\",{value:this.state.formdata.rating,onChange:function onChange(event){return _this2.handleInput(event,'rating');}},/*#__PURE__*/React.createElement(\"option\",{val:\"1\"},\"1\"),/*#__PURE__*/React.createElement(\"option\",{val:\"2\"},\"2\"),/*#__PURE__*/React.createElement(\"option\",{val:\"3\"},\"3\"),/*#__PURE__*/React.createElement(\"option\",{val:\"4\"},\"4\"),/*#__PURE__*/React.createElement(\"option\",{val:\"5\"},\"5\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",placeholder:\"Enter price\",value:this.state.formdata.price,onChange:function onChange(event){return _this2.handleInput(event,'price');}})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Add review\"),// if new book exists\nthis.props.books.newbook?this.showNewBook(this.props.books.newbook):null));}}]);return AddBook;}(Component);function mapStateToProps(state){// console.log(state); \nreturn{books:state.books};}export default connect(mapStateToProps)(AddBook);","map":{"version":3,"sources":["/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/src/components/Admin/add.js"],"names":["React","Component","connect","Link","addBook","clearNewBook","AddBook","state","formdata","name","author","review","pages","rating","price","handleInput","event","newFormdata","target","value","setState","showNewBook","book","post","bookId","submitForm","e","preventDefault","props","dispatch","ownerId","user","login","id","books","newbook","mapStateToProps"],"mappings":"o2BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,OAASC,OAAT,CAAkBC,YAAlB,KAAsC,eAAtC,C,GAEMC,CAAAA,O,+TAGFC,K,CAAQ,CACJC,QAAQ,CAAC,CACLC,IAAI,CAAC,EADA,CAELC,MAAM,CAAC,EAFF,CAGLC,MAAM,CAAC,EAHF,CAILC,KAAK,CAAC,EAJD,CAKLC,MAAM,CAAC,EALF,CAMLC,KAAK,CAAC,EAND,CADL,C,OAYRC,W,CAAc,SAACC,KAAD,CAAQP,IAAR,CAAiB,CAC3B;AACA,GAAMQ,CAAAA,WAAW,kBACV,MAAKV,KAAL,CAAWC,QADD,CAAjB,CAIA;AACAS,WAAW,CAACR,IAAD,CAAX,CAAoBO,KAAK,CAACE,MAAN,CAAaC,KAAjC,CAEA;AACA,MAAKC,QAAL,CAAc,CACVZ,QAAQ,CAACS,WADC,CAAd,EAGH,C,OAGDI,W,CAAc,SAACC,IAAD,QACVA,CAAAA,IAAI,CAACC,IAAL,cACI,2BAAK,SAAS,CAAC,WAAf,0BACY,oBAAC,IAAD,EAAM,EAAE,kBAAYD,IAAI,CAACE,MAAjB,CAAR,mCADZ,CADJ,CAME,IAPQ,E,OAWdC,U,CAAa,SAACC,CAAD,CAAO,CAChBA,CAAC,CAACC,cAAF,GAEA;AAEA;AACA,MAAKC,KAAL,CAAWC,QAAX,CAAoBzB,OAAO,kBACpB,MAAKG,KAAL,CAAWC,QADS,EAEvBsB,OAAO,CAAC,MAAKF,KAAL,CAAWG,IAAX,CAAgBC,KAAhB,CAAsBC,EAFP,GAA3B,EAIH,C,iEAGD;qCACuB,CACnB,KAAKL,KAAL,CAAWC,QAAX,CAAoBxB,YAAY,EAAhC,EACH,C,uCAGQ,iBACL;AACA,mBACI,2BAAK,SAAS,CAAC,sBAAf,eACI,4BAAM,QAAQ,CAAE,KAAKoB,UAArB,eAEI,6CAFJ,cAII,2BAAK,SAAS,CAAC,cAAf,eACI,6BACI,IAAI,CAAC,MADT,CAEI,WAAW,CAAC,YAFhB,CAGI,KAAK,CAAE,KAAKlB,KAAL,CAAWC,QAAX,CAAoBC,IAH/B,CAII,QAAQ,CAAE,kBAACO,KAAD,QAAW,CAAA,MAAI,CAACD,WAAL,CAAiBC,KAAjB,CAAwB,MAAxB,CAAX,EAJd,EADJ,CAJJ,cAaI,2BAAK,SAAS,CAAC,cAAf,eACI,6BACI,IAAI,CAAC,MADT,CAEI,WAAW,CAAC,cAFhB,CAGI,KAAK,CAAE,KAAKT,KAAL,CAAWC,QAAX,CAAoBE,MAH/B,CAII,QAAQ,CAAE,kBAACM,KAAD,QAAW,CAAA,MAAI,CAACD,WAAL,CAAiBC,KAAjB,CAAwB,QAAxB,CAAX,EAJd,EADJ,CAbJ,cAuBI,gCACI,KAAK,CAAE,KAAKT,KAAL,CAAWC,QAAX,CAAoBG,MAD/B,CAEI,QAAQ,CAAE,kBAACK,KAAD,QAAW,CAAA,MAAI,CAACD,WAAL,CAAiBC,KAAjB,CAAwB,QAAxB,CAAX,EAFd,EAvBJ,cA6BI,2BAAK,SAAS,CAAC,cAAf,eACI,6BACI,IAAI,CAAC,QADT,CAEI,WAAW,CAAC,aAFhB,CAGI,KAAK,CAAE,KAAKT,KAAL,CAAWC,QAAX,CAAoBI,KAH/B,CAII,QAAQ,CAAE,kBAACI,KAAD,QAAW,CAAA,MAAI,CAACD,WAAL,CAAiBC,KAAjB,CAAwB,OAAxB,CAAX,EAJd,EADJ,CA7BJ,cAqCI,2BAAK,SAAS,CAAC,cAAf,eACI,8BACI,KAAK,CAAE,KAAKT,KAAL,CAAWC,QAAX,CAAoBK,MAD/B,CAEI,QAAQ,CAAE,kBAACG,KAAD,QAAW,CAAA,MAAI,CAACD,WAAL,CAAiBC,KAAjB,CAAwB,QAAxB,CAAX,EAFd,eAII,8BAAQ,GAAG,CAAC,GAAZ,MAJJ,cAKI,8BAAQ,GAAG,CAAC,GAAZ,MALJ,cAMI,8BAAQ,GAAG,CAAC,GAAZ,MANJ,cAOI,8BAAQ,GAAG,CAAC,GAAZ,MAPJ,cAQI,8BAAQ,GAAG,CAAC,GAAZ,MARJ,CADJ,CArCJ,cAoDI,2BAAK,SAAS,CAAC,cAAf,eACI,6BACI,IAAI,CAAC,QADT,CAEI,WAAW,CAAC,aAFhB,CAGI,KAAK,CAAE,KAAKT,KAAL,CAAWC,QAAX,CAAoBM,KAH/B,CAII,QAAQ,CAAE,kBAACE,KAAD,QAAW,CAAA,MAAI,CAACD,WAAL,CAAiBC,KAAjB,CAAwB,OAAxB,CAAX,EAJd,EADJ,CApDJ,cA6DI,8BAAQ,IAAI,CAAC,QAAb,eA7DJ,CAgEQ;AACA,KAAKY,KAAL,CAAWM,KAAX,CAAiBC,OAAjB,CACI,KAAKd,WAAL,CAAiB,KAAKO,KAAL,CAAWM,KAAX,CAAiBC,OAAlC,CADJ,CAEE,IAnEV,CADJ,CADJ,CA8EH,C,qBA7IiBlC,S,EAgJtB,QAASmC,CAAAA,eAAT,CAAyB7B,KAAzB,CAAgC,CAC5B;AACA,MAAO,CACH2B,KAAK,CAAC3B,KAAK,CAAC2B,KADT,CAAP,CAGH,CAED,cAAehC,CAAAA,OAAO,CAACkC,eAAD,CAAP,CAAyB9B,OAAzB,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport { addBook, clearNewBook } from '../../actions';\n\nclass AddBook extends Component {\n\n\n    state = {\n        formdata:{\n            name:'',\n            author:'', \n            review:'',\n            pages:'',\n            rating:'',\n            price:''\n        }\n    }\n\n\n    handleInput = (event, name) => {\n        // make a copy of formdata\n        const newFormdata = {\n            ...this.state.formdata\n        }\n\n        // populate the copy with the input value\n        newFormdata[name] = event.target.value;\n\n        // copy it back to state\n        this.setState({\n            formdata:newFormdata\n        })\n    }\n\n\n    showNewBook = (book) => (\n        book.post ?\n            <div className=\"conf_link\">\n                Cool !! <Link to={`/books/${book.bookId}`}>\n                    Click the link to see the post\n                </Link>\n            </div>\n        : null\n    )\n\n\n    submitForm = (e) => {\n        e.preventDefault();\n        \n        // console.log(this.state.formdata);\n\n        // dispatch an action, adding updated  formdata + the user id from the redux store\n        this.props.dispatch(addBook({\n            ...this.state.formdata,\n            ownerId:this.props.user.login.id\n        }))\n    }\n\n\n    // clear success message \n    componentWillUnmount() {\n        this.props.dispatch(clearNewBook())\n    }\n\n\n    render() {\n        // console.log(this.props);\n        return (\n            <div className=\"rl_container article\">\n                <form onSubmit={this.submitForm}>\n                    \n                    <h2>Add a review</h2>\n\n                    <div className=\"form_element\">\n                        <input\n                            type=\"text\"\n                            placeholder=\"Enter name\"\n                            value={this.state.formdata.name} \n                            onChange={(event) => this.handleInput(event, 'name')}\n                        />\n                    </div>\n\n                    <div className=\"form_element\">\n                        <input\n                            type=\"text\"\n                            placeholder=\"Enter author\"\n                            value={this.state.formdata.author} \n                            onChange={(event) => this.handleInput(event, 'author')}    \n                        />\n                    </div>\n\n\n                    <textarea\n                        value={this.state.formdata.review}\n                        onChange={(event) => this.handleInput(event, 'review')}\n                    />\n\n\n                    <div className=\"form_element\">\n                        <input\n                            type=\"number\"\n                            placeholder=\"Enter pages\"\n                            value={this.state.formdata.pages} \n                            onChange={(event) => this.handleInput(event, 'pages')}                        />\n                    </div>\n\n                    <div className=\"form_element\">\n                        <select\n                            value={this.state.formdata.rating}\n                            onChange={(event) => this.handleInput(event, 'rating')}\n                        >\n                            <option val=\"1\">1</option>\n                            <option val=\"2\">2</option>\n                            <option val=\"3\">3</option>\n                            <option val=\"4\">4</option>\n                            <option val=\"5\">5</option>\n\n                        </select>\n                    </div>\n\n\n                    <div className=\"form_element\">\n                        <input\n                            type=\"number\"\n                            placeholder=\"Enter price\"\n                            value={this.state.formdata.price} \n                            onChange={(event) => this.handleInput(event, 'price')}                        />\n                    </div>\n\n\n                    <button type=\"submit\">Add review</button>\n\n                    {\n                        // if new book exists\n                        this.props.books.newbook ?\n                            this.showNewBook(this.props.books.newbook)\n                        : null\n\n\n                    }\n\n\n                </form>\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    // console.log(state); \n    return {\n        books:state.books\n    }\n}\n\nexport default connect(mapStateToProps)(AddBook)\n\n\n"]},"metadata":{},"sourceType":"module"}