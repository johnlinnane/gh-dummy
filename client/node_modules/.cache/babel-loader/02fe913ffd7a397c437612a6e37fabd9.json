{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar dragDrop_1 = require(\"../actions/dragDrop\");\n\nvar registry_1 = require(\"../actions/registry\");\n\nvar equality_1 = require(\"../utils/equality\");\n\nvar dirtiness_1 = require(\"../utils/dirtiness\");\n\nvar xor = require('lodash/xor');\n\nfunction dirtyHandlerIds(state, action) {\n  if (state === void 0) {\n    state = dirtiness_1.NONE;\n  }\n\n  switch (action.type) {\n    case dragDrop_1.HOVER:\n      break;\n\n    case registry_1.ADD_SOURCE:\n    case registry_1.ADD_TARGET:\n    case registry_1.REMOVE_TARGET:\n    case registry_1.REMOVE_SOURCE:\n      return dirtiness_1.NONE;\n\n    case dragDrop_1.BEGIN_DRAG:\n    case dragDrop_1.PUBLISH_DRAG_SOURCE:\n    case dragDrop_1.END_DRAG:\n    case dragDrop_1.DROP:\n    default:\n      return dirtiness_1.ALL;\n  }\n\n  var _a = action.payload,\n      _b = _a.targetIds,\n      targetIds = _b === void 0 ? [] : _b,\n      _c = _a.prevTargetIds,\n      prevTargetIds = _c === void 0 ? [] : _c;\n  var result = xor(targetIds, prevTargetIds);\n  var didChange = result.length > 0 || !equality_1.areArraysEqual(targetIds, prevTargetIds);\n\n  if (!didChange) {\n    return dirtiness_1.NONE;\n  } // Check the target ids at the innermost position. If they are valid, add them\n  // to the result\n\n\n  var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n  var innermostTargetId = targetIds[targetIds.length - 1];\n\n  if (prevInnermostTargetId !== innermostTargetId) {\n    if (prevInnermostTargetId) {\n      result.push(prevInnermostTargetId);\n    }\n\n    if (innermostTargetId) {\n      result.push(innermostTargetId);\n    }\n  }\n\n  return result;\n}\n\nexports.default = dirtyHandlerIds;","map":{"version":3,"sources":["/Users/johnlinnane/DEV/tc-book/node_modules/react-dnd/node_modules/dnd-core/lib/reducers/dirtyHandlerIds.js"],"names":["Object","defineProperty","exports","value","dragDrop_1","require","registry_1","equality_1","dirtiness_1","xor","dirtyHandlerIds","state","action","NONE","type","HOVER","ADD_SOURCE","ADD_TARGET","REMOVE_TARGET","REMOVE_SOURCE","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","END_DRAG","DROP","ALL","_a","payload","_b","targetIds","_c","prevTargetIds","result","didChange","length","areArraysEqual","prevInnermostTargetId","innermostTargetId","push","default"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAIC,UAAU,GAAGC,OAAO,CAAC,qBAAD,CAAxB;;AACA,IAAIC,UAAU,GAAGD,OAAO,CAAC,qBAAD,CAAxB;;AACA,IAAIE,UAAU,GAAGF,OAAO,CAAC,mBAAD,CAAxB;;AACA,IAAIG,WAAW,GAAGH,OAAO,CAAC,oBAAD,CAAzB;;AACA,IAAII,GAAG,GAAGJ,OAAO,CAAC,YAAD,CAAjB;;AACA,SAASK,eAAT,CAAyBC,KAAzB,EAAgCC,MAAhC,EAAwC;AACpC,MAAID,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAAEA,IAAAA,KAAK,GAAGH,WAAW,CAACK,IAApB;AAA2B;;AACnD,UAAQD,MAAM,CAACE,IAAf;AACI,SAAKV,UAAU,CAACW,KAAhB;AACI;;AACJ,SAAKT,UAAU,CAACU,UAAhB;AACA,SAAKV,UAAU,CAACW,UAAhB;AACA,SAAKX,UAAU,CAACY,aAAhB;AACA,SAAKZ,UAAU,CAACa,aAAhB;AACI,aAAOX,WAAW,CAACK,IAAnB;;AACJ,SAAKT,UAAU,CAACgB,UAAhB;AACA,SAAKhB,UAAU,CAACiB,mBAAhB;AACA,SAAKjB,UAAU,CAACkB,QAAhB;AACA,SAAKlB,UAAU,CAACmB,IAAhB;AACA;AACI,aAAOf,WAAW,CAACgB,GAAnB;AAbR;;AAeA,MAAIC,EAAE,GAAGb,MAAM,CAACc,OAAhB;AAAA,MAAyBC,EAAE,GAAGF,EAAE,CAACG,SAAjC;AAAA,MAA4CA,SAAS,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAA7E;AAAA,MAAiFE,EAAE,GAAGJ,EAAE,CAACK,aAAzF;AAAA,MAAwGA,aAAa,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAA7I;AACA,MAAIE,MAAM,GAAGtB,GAAG,CAACmB,SAAD,EAAYE,aAAZ,CAAhB;AACA,MAAIE,SAAS,GAAGD,MAAM,CAACE,MAAP,GAAgB,CAAhB,IAAqB,CAAC1B,UAAU,CAAC2B,cAAX,CAA0BN,SAA1B,EAAqCE,aAArC,CAAtC;;AACA,MAAI,CAACE,SAAL,EAAgB;AACZ,WAAOxB,WAAW,CAACK,IAAnB;AACH,GAtBmC,CAuBpC;AACA;;;AACA,MAAIsB,qBAAqB,GAAGL,aAAa,CAACA,aAAa,CAACG,MAAd,GAAuB,CAAxB,CAAzC;AACA,MAAIG,iBAAiB,GAAGR,SAAS,CAACA,SAAS,CAACK,MAAV,GAAmB,CAApB,CAAjC;;AACA,MAAIE,qBAAqB,KAAKC,iBAA9B,EAAiD;AAC7C,QAAID,qBAAJ,EAA2B;AACvBJ,MAAAA,MAAM,CAACM,IAAP,CAAYF,qBAAZ;AACH;;AACD,QAAIC,iBAAJ,EAAuB;AACnBL,MAAAA,MAAM,CAACM,IAAP,CAAYD,iBAAZ;AACH;AACJ;;AACD,SAAOL,MAAP;AACH;;AACD7B,OAAO,CAACoC,OAAR,GAAkB5B,eAAlB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar dragDrop_1 = require(\"../actions/dragDrop\");\nvar registry_1 = require(\"../actions/registry\");\nvar equality_1 = require(\"../utils/equality\");\nvar dirtiness_1 = require(\"../utils/dirtiness\");\nvar xor = require('lodash/xor');\nfunction dirtyHandlerIds(state, action) {\n    if (state === void 0) { state = dirtiness_1.NONE; }\n    switch (action.type) {\n        case dragDrop_1.HOVER:\n            break;\n        case registry_1.ADD_SOURCE:\n        case registry_1.ADD_TARGET:\n        case registry_1.REMOVE_TARGET:\n        case registry_1.REMOVE_SOURCE:\n            return dirtiness_1.NONE;\n        case dragDrop_1.BEGIN_DRAG:\n        case dragDrop_1.PUBLISH_DRAG_SOURCE:\n        case dragDrop_1.END_DRAG:\n        case dragDrop_1.DROP:\n        default:\n            return dirtiness_1.ALL;\n    }\n    var _a = action.payload, _b = _a.targetIds, targetIds = _b === void 0 ? [] : _b, _c = _a.prevTargetIds, prevTargetIds = _c === void 0 ? [] : _c;\n    var result = xor(targetIds, prevTargetIds);\n    var didChange = result.length > 0 || !equality_1.areArraysEqual(targetIds, prevTargetIds);\n    if (!didChange) {\n        return dirtiness_1.NONE;\n    }\n    // Check the target ids at the innermost position. If they are valid, add them\n    // to the result\n    var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n    var innermostTargetId = targetIds[targetIds.length - 1];\n    if (prevInnermostTargetId !== innermostTargetId) {\n        if (prevInnermostTargetId) {\n            result.push(prevInnermostTargetId);\n        }\n        if (innermostTargetId) {\n            result.push(innermostTargetId);\n        }\n    }\n    return result;\n}\nexports.default = dirtyHandlerIds;\n"]},"metadata":{},"sourceType":"script"}