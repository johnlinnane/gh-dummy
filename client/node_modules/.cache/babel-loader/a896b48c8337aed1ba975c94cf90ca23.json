{"ast":null,"code":"import _classCallCheck from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{PureComponent}from'react';import{connect}from'react-redux';import{getUsers,userRegister}from'../../actions';var Register=/*#__PURE__*/function(_PureComponent){_inherits(Register,_PureComponent);var _super=_createSuper(Register);function Register(){var _this;_classCallCheck(this,Register);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={name:'',lastname:'',email:'',password:'',error:''};_this.handleInputEmail=function(event){_this.setState({email:event.target.value});};_this.handleInputPassword=function(event){_this.setState({password:event.target.value});};_this.handleInputName=function(event){_this.setState({name:event.target.value});};_this.handleInputLastname=function(event){_this.setState({lastname:event.target.value});};_this.submitForm=function(e){e.preventDefault();_this.setState({error:''});// dispatch the action to get inside props\n_this.props.dispatch(userRegister({email:_this.state.email,password:_this.state.password,name:_this.state.name,lastname:_this.state.lastname},_this.props.user.users));};_this.showUsers=function(user){return user.users?user.users.map(function(item){return/*#__PURE__*/React.createElement(\"tr\",{key:item._id},/*#__PURE__*/React.createElement(\"td\",null,item.name),/*#__PURE__*/React.createElement(\"td\",null,item.lastname),/*#__PURE__*/React.createElement(\"td\",null,item.email));}):null;};return _this;}_createClass(Register,[{key:\"componentWillMount\",value:function componentWillMount(){this.props.dispatch(getUsers());}},{key:\"componentWillReceiveProps\",// reset the state when form is submitted\nvalue:function componentWillReceiveProps(nextProps){if(nextProps.user.register===false){this.setState({error:'Error, try again'});}else{this.setState({name:'',lastname:'',email:'',password:''});}}},{key:\"render\",value:function render(){// console.log(this.props);\nvar user=this.props.user;return/*#__PURE__*/React.createElement(\"div\",{className:\"rl_container\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.submitForm},/*#__PURE__*/React.createElement(\"h2\",null,\"Add user\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Enter name\",value:this.state.name,onChange:this.handleInputName})),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Enter Lastname\",value:this.state.lastname,onChange:this.handleInputLastname})),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"email\",placeholder:\"Enter Email\",value:this.state.email,onChange:this.handleInputEmail})),/*#__PURE__*/React.createElement(\"div\",{className:\"form_element\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"Enter password\",value:this.state.password,onChange:this.handleInputPassword})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Add user\"),/*#__PURE__*/React.createElement(\"div\",{className:\"error\"},this.state.error)),/*#__PURE__*/React.createElement(\"div\",{className:\"current_users\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Current users:\"),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Lastname\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"))),/*#__PURE__*/React.createElement(\"tbody\",null,this.showUsers(user)))));}}]);return Register;}(PureComponent);function mapStateToProps(state){return{user:state.user};}export default connect(mapStateToProps)(Register);","map":{"version":3,"sources":["/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/src/containers/Admin/register.js"],"names":["React","PureComponent","connect","getUsers","userRegister","Register","state","name","lastname","email","password","error","handleInputEmail","event","setState","target","value","handleInputPassword","handleInputName","handleInputLastname","submitForm","e","preventDefault","props","dispatch","user","users","showUsers","map","item","_id","nextProps","register","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\n\nimport { connect } from 'react-redux';\nimport { getUsers, userRegister } from '../../actions';\n\nclass Register extends PureComponent {\n\n\n    state = {\n        name:'', \n        lastname:'',\n        email:'',\n        password:'',\n        error:''\n    }\n\n\n    componentWillMount() {\n        this.props.dispatch(getUsers())\n    }\n\n    handleInputEmail = (event) => {\n        this.setState({email:event.target.value})\n    }\n\n    handleInputPassword = (event) => {\n        this.setState({password:event.target.value})\n    }\n\n    handleInputName = (event) => {\n        this.setState({name:event.target.value})\n    }\n\n    handleInputLastname = (event) => {\n        this.setState({lastname:event.target.value})\n    }\n\n    // reset the state when form is submitted\n    componentWillReceiveProps(nextProps) {\n        if(nextProps.user.register === false) {\n            this.setState({error:'Error, try again'})\n        } else {\n            this.setState({\n                name:'', \n                lastname:'',\n                email:'',\n                password:''\n            })\n        }\n    }\n\n\n    submitForm = (e) => {\n        e.preventDefault();\n        this.setState({error:''});\n\n        // dispatch the action to get inside props\n        this.props.dispatch(userRegister({\n            email:this.state.email,\n            password:this.state.password,\n            name:this.state.name,\n            lastname:this.state.lastname,\n        }, this.props.user.users))\n\n\n    }\n\n    showUsers = (user) => (\n        user.users ?\n            user.users.map(item => (\n                <tr key={item._id}>\n                    <td>{item.name}</td>\n                    <td>{item.lastname}</td>\n                    <td>{item.email}</td>\n                    \n                </tr>\n            )) \n        : null\n    )\n\n\n    render() {\n\n        // console.log(this.props);\n\n        let user = this.props.user;\n\n        return (\n            <div className=\"rl_container\">\n\n                <form onSubmit={this.submitForm}>\n                    <h2>Add user</h2>\n\n                    <div className=\"form_element\">\n                        <input\n                            type=\"text\"\n                            placeholder=\"Enter name\"\n                            value={this.state.name}\n                            onChange={this.handleInputName}\n                        />\n                    </div>\n\n                    <div className=\"form_element\">\n                        <input\n                            type=\"text\"\n                            placeholder=\"Enter Lastname\"\n                            value={this.state.lastname}\n                            onChange={this.handleInputLastname}\n                        />\n                    </div>\n\n                    <div className=\"form_element\">\n                        <input\n                            type=\"email\"\n                            placeholder=\"Enter Email\"\n                            value={this.state.email}\n                            onChange={this.handleInputEmail}\n                        />\n                    </div>\n\n                    <div className=\"form_element\">\n                        <input\n                            type=\"password\"\n                            placeholder=\"Enter password\"\n                            value={this.state.password}\n                            onChange={this.handleInputPassword}\n                        />\n                    </div>\n\n                    <button type=\"submit\">Add user</button>\n\n                    <div className=\"error\">\n                        {this.state.error}\n                    </div>\n\n\n                </form>\n\n\n                <div className=\"current_users\">\n                    <h4>Current users:</h4>\n\n                    <table>\n                        \n                        <thead>\n                            <tr>\n                                <th>Name</th>\n                                <th>Lastname</th>\n                                <th>Email</th>\n                            </tr>\n                        </thead>\n\n                        <tbody>\n                            {this.showUsers(user)}\n                        </tbody>\n\n                    </table>\n\n                </div>\n\n\n            </div>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        user:state.user\n    }\n}\n\n\nexport default connect(mapStateToProps)(Register)"]},"metadata":{},"sourceType":"module"}