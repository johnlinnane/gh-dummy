{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar registry_1 = require(\"./actions/registry\");\n\nvar getNextUniqueId_1 = require(\"./utils/getNextUniqueId\");\n\nvar interfaces_1 = require(\"./interfaces\");\n\nvar contracts_1 = require(\"./contracts\");\n\nvar invariant = require('invariant');\n\nvar asap = require('asap');\n\nfunction getNextHandlerId(role) {\n  var id = getNextUniqueId_1.default().toString();\n\n  switch (role) {\n    case interfaces_1.HandlerRole.SOURCE:\n      return \"S\" + id;\n\n    case interfaces_1.HandlerRole.TARGET:\n      return \"T\" + id;\n\n    default:\n      throw new Error(\"Unknown Handler Role: \" + role);\n  }\n}\n\nfunction parseRoleFromHandlerId(handlerId) {\n  switch (handlerId[0]) {\n    case 'S':\n      return interfaces_1.HandlerRole.SOURCE;\n\n    case 'T':\n      return interfaces_1.HandlerRole.TARGET;\n\n    default:\n      invariant(false, \"Cannot parse handler ID: \" + handlerId);\n  }\n}\n\nfunction mapContainsValue(map, searchValue) {\n  var entries = map.entries();\n  var isDone = false;\n\n  do {\n    var _a = entries.next(),\n        done = _a.done,\n        _b = _a.value,\n        value = _b[1];\n\n    if (value === searchValue) {\n      return true;\n    }\n\n    isDone = done;\n  } while (!isDone);\n\n  return false;\n}\n\nvar HandlerRegistryImpl =\n/** @class */\nfunction () {\n  function HandlerRegistryImpl(store) {\n    this.store = store;\n    this.types = new Map();\n    this.dragSources = new Map();\n    this.dropTargets = new Map();\n    this.pinnedSourceId = null;\n    this.pinnedSource = null;\n  }\n\n  HandlerRegistryImpl.prototype.addSource = function (type, source) {\n    contracts_1.validateType(type);\n    contracts_1.validateSourceContract(source);\n    var sourceId = this.addHandler(interfaces_1.HandlerRole.SOURCE, type, source);\n    this.store.dispatch(registry_1.addSource(sourceId));\n    return sourceId;\n  };\n\n  HandlerRegistryImpl.prototype.addTarget = function (type, target) {\n    contracts_1.validateType(type, true);\n    contracts_1.validateTargetContract(target);\n    var targetId = this.addHandler(interfaces_1.HandlerRole.TARGET, type, target);\n    this.store.dispatch(registry_1.addTarget(targetId));\n    return targetId;\n  };\n\n  HandlerRegistryImpl.prototype.containsHandler = function (handler) {\n    return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n  };\n\n  HandlerRegistryImpl.prototype.getSource = function (sourceId, includePinned) {\n    if (includePinned === void 0) {\n      includePinned = false;\n    }\n\n    invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n    var isPinned = includePinned && sourceId === this.pinnedSourceId;\n    var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n    return source;\n  };\n\n  HandlerRegistryImpl.prototype.getTarget = function (targetId) {\n    invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n    return this.dropTargets.get(targetId);\n  };\n\n  HandlerRegistryImpl.prototype.getSourceType = function (sourceId) {\n    invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n    return this.types.get(sourceId);\n  };\n\n  HandlerRegistryImpl.prototype.getTargetType = function (targetId) {\n    invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n    return this.types.get(targetId);\n  };\n\n  HandlerRegistryImpl.prototype.isSourceId = function (handlerId) {\n    var role = parseRoleFromHandlerId(handlerId);\n    return role === interfaces_1.HandlerRole.SOURCE;\n  };\n\n  HandlerRegistryImpl.prototype.isTargetId = function (handlerId) {\n    var role = parseRoleFromHandlerId(handlerId);\n    return role === interfaces_1.HandlerRole.TARGET;\n  };\n\n  HandlerRegistryImpl.prototype.removeSource = function (sourceId) {\n    var _this = this;\n\n    invariant(this.getSource(sourceId), 'Expected an existing source.');\n    this.store.dispatch(registry_1.removeSource(sourceId));\n    asap(function () {\n      _this.dragSources.delete(sourceId);\n\n      _this.types.delete(sourceId);\n    });\n  };\n\n  HandlerRegistryImpl.prototype.removeTarget = function (targetId) {\n    invariant(this.getTarget(targetId), 'Expected an existing target.');\n    this.store.dispatch(registry_1.removeTarget(targetId));\n    this.dropTargets.delete(targetId);\n    this.types.delete(targetId);\n  };\n\n  HandlerRegistryImpl.prototype.pinSource = function (sourceId) {\n    var source = this.getSource(sourceId);\n    invariant(source, 'Expected an existing source.');\n    this.pinnedSourceId = sourceId;\n    this.pinnedSource = source;\n  };\n\n  HandlerRegistryImpl.prototype.unpinSource = function () {\n    invariant(this.pinnedSource, 'No source is pinned at the time.');\n    this.pinnedSourceId = null;\n    this.pinnedSource = null;\n  };\n\n  HandlerRegistryImpl.prototype.addHandler = function (role, type, handler) {\n    var id = getNextHandlerId(role);\n    this.types.set(id, type);\n\n    if (role === interfaces_1.HandlerRole.SOURCE) {\n      this.dragSources.set(id, handler);\n    } else if (role === interfaces_1.HandlerRole.TARGET) {\n      this.dropTargets.set(id, handler);\n    }\n\n    return id;\n  };\n\n  return HandlerRegistryImpl;\n}();\n\nexports.default = HandlerRegistryImpl;","map":{"version":3,"sources":["/Users/johnlinnane/DEV/tc-book/node_modules/react-dnd/node_modules/dnd-core/lib/HandlerRegistryImpl.js"],"names":["Object","defineProperty","exports","value","registry_1","require","getNextUniqueId_1","interfaces_1","contracts_1","invariant","asap","getNextHandlerId","role","id","default","toString","HandlerRole","SOURCE","TARGET","Error","parseRoleFromHandlerId","handlerId","mapContainsValue","map","searchValue","entries","isDone","_a","next","done","_b","HandlerRegistryImpl","store","types","Map","dragSources","dropTargets","pinnedSourceId","pinnedSource","prototype","addSource","type","source","validateType","validateSourceContract","sourceId","addHandler","dispatch","addTarget","target","validateTargetContract","targetId","containsHandler","handler","getSource","includePinned","isSourceId","isPinned","get","getTarget","isTargetId","getSourceType","getTargetType","removeSource","_this","delete","removeTarget","pinSource","unpinSource","set"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar registry_1 = require(\"./actions/registry\");\nvar getNextUniqueId_1 = require(\"./utils/getNextUniqueId\");\nvar interfaces_1 = require(\"./interfaces\");\nvar contracts_1 = require(\"./contracts\");\nvar invariant = require('invariant');\nvar asap = require('asap');\nfunction getNextHandlerId(role) {\n    var id = getNextUniqueId_1.default().toString();\n    switch (role) {\n        case interfaces_1.HandlerRole.SOURCE:\n            return \"S\" + id;\n        case interfaces_1.HandlerRole.TARGET:\n            return \"T\" + id;\n        default:\n            throw new Error(\"Unknown Handler Role: \" + role);\n    }\n}\nfunction parseRoleFromHandlerId(handlerId) {\n    switch (handlerId[0]) {\n        case 'S':\n            return interfaces_1.HandlerRole.SOURCE;\n        case 'T':\n            return interfaces_1.HandlerRole.TARGET;\n        default:\n            invariant(false, \"Cannot parse handler ID: \" + handlerId);\n    }\n}\nfunction mapContainsValue(map, searchValue) {\n    var entries = map.entries();\n    var isDone = false;\n    do {\n        var _a = entries.next(), done = _a.done, _b = _a.value, value = _b[1];\n        if (value === searchValue) {\n            return true;\n        }\n        isDone = done;\n    } while (!isDone);\n    return false;\n}\nvar HandlerRegistryImpl = /** @class */ (function () {\n    function HandlerRegistryImpl(store) {\n        this.store = store;\n        this.types = new Map();\n        this.dragSources = new Map();\n        this.dropTargets = new Map();\n        this.pinnedSourceId = null;\n        this.pinnedSource = null;\n    }\n    HandlerRegistryImpl.prototype.addSource = function (type, source) {\n        contracts_1.validateType(type);\n        contracts_1.validateSourceContract(source);\n        var sourceId = this.addHandler(interfaces_1.HandlerRole.SOURCE, type, source);\n        this.store.dispatch(registry_1.addSource(sourceId));\n        return sourceId;\n    };\n    HandlerRegistryImpl.prototype.addTarget = function (type, target) {\n        contracts_1.validateType(type, true);\n        contracts_1.validateTargetContract(target);\n        var targetId = this.addHandler(interfaces_1.HandlerRole.TARGET, type, target);\n        this.store.dispatch(registry_1.addTarget(targetId));\n        return targetId;\n    };\n    HandlerRegistryImpl.prototype.containsHandler = function (handler) {\n        return (mapContainsValue(this.dragSources, handler) ||\n            mapContainsValue(this.dropTargets, handler));\n    };\n    HandlerRegistryImpl.prototype.getSource = function (sourceId, includePinned) {\n        if (includePinned === void 0) { includePinned = false; }\n        invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n        var isPinned = includePinned && sourceId === this.pinnedSourceId;\n        var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n        return source;\n    };\n    HandlerRegistryImpl.prototype.getTarget = function (targetId) {\n        invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n        return this.dropTargets.get(targetId);\n    };\n    HandlerRegistryImpl.prototype.getSourceType = function (sourceId) {\n        invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n        return this.types.get(sourceId);\n    };\n    HandlerRegistryImpl.prototype.getTargetType = function (targetId) {\n        invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n        return this.types.get(targetId);\n    };\n    HandlerRegistryImpl.prototype.isSourceId = function (handlerId) {\n        var role = parseRoleFromHandlerId(handlerId);\n        return role === interfaces_1.HandlerRole.SOURCE;\n    };\n    HandlerRegistryImpl.prototype.isTargetId = function (handlerId) {\n        var role = parseRoleFromHandlerId(handlerId);\n        return role === interfaces_1.HandlerRole.TARGET;\n    };\n    HandlerRegistryImpl.prototype.removeSource = function (sourceId) {\n        var _this = this;\n        invariant(this.getSource(sourceId), 'Expected an existing source.');\n        this.store.dispatch(registry_1.removeSource(sourceId));\n        asap(function () {\n            _this.dragSources.delete(sourceId);\n            _this.types.delete(sourceId);\n        });\n    };\n    HandlerRegistryImpl.prototype.removeTarget = function (targetId) {\n        invariant(this.getTarget(targetId), 'Expected an existing target.');\n        this.store.dispatch(registry_1.removeTarget(targetId));\n        this.dropTargets.delete(targetId);\n        this.types.delete(targetId);\n    };\n    HandlerRegistryImpl.prototype.pinSource = function (sourceId) {\n        var source = this.getSource(sourceId);\n        invariant(source, 'Expected an existing source.');\n        this.pinnedSourceId = sourceId;\n        this.pinnedSource = source;\n    };\n    HandlerRegistryImpl.prototype.unpinSource = function () {\n        invariant(this.pinnedSource, 'No source is pinned at the time.');\n        this.pinnedSourceId = null;\n        this.pinnedSource = null;\n    };\n    HandlerRegistryImpl.prototype.addHandler = function (role, type, handler) {\n        var id = getNextHandlerId(role);\n        this.types.set(id, type);\n        if (role === interfaces_1.HandlerRole.SOURCE) {\n            this.dragSources.set(id, handler);\n        }\n        else if (role === interfaces_1.HandlerRole.TARGET) {\n            this.dropTargets.set(id, handler);\n        }\n        return id;\n    };\n    return HandlerRegistryImpl;\n}());\nexports.default = HandlerRegistryImpl;\n"]},"metadata":{},"sourceType":"script"}