{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports['default'] = promiseMiddleware;\n\nvar _fluxStandardAction = require('flux-standard-action');\n\nfunction isPromise(val) {\n  return val && typeof val.then === 'function';\n}\n\nfunction promiseMiddleware(_ref) {\n  var dispatch = _ref.dispatch;\n  return function (next) {\n    return function (action) {\n      if (!_fluxStandardAction.isFSA(action)) {\n        return isPromise(action) ? action.then(dispatch) : next(action);\n      }\n\n      return isPromise(action.payload) ? action.payload.then(function (result) {\n        return dispatch(_extends({}, action, {\n          payload: result\n        }));\n      }, function (error) {\n        return dispatch(_extends({}, action, {\n          payload: error,\n          error: true\n        }));\n      }) : next(action);\n    };\n  };\n}\n\nmodule.exports = exports['default'];","map":{"version":3,"sources":["/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/redux-promise/lib/index.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","promiseMiddleware","_fluxStandardAction","require","isPromise","val","then","_ref","dispatch","next","action","isFSA","payload","result","error","module"],"mappings":"AAAA;;AAEAA,OAAO,CAACC,UAAR,GAAqB,IAArB;;AAEA,IAAIC,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,QAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,SAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,UAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,QAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,SAAOL,MAAP;AAAgB,CAAhQ;;AAEAL,OAAO,CAAC,SAAD,CAAP,GAAqBc,iBAArB;;AAEA,IAAIC,mBAAmB,GAAGC,OAAO,CAAC,sBAAD,CAAjC;;AAEA,SAASC,SAAT,CAAmBC,GAAnB,EAAwB;AACtB,SAAOA,GAAG,IAAI,OAAOA,GAAG,CAACC,IAAX,KAAoB,UAAlC;AACD;;AAED,SAASL,iBAAT,CAA2BM,IAA3B,EAAiC;AAC/B,MAAIC,QAAQ,GAAGD,IAAI,CAACC,QAApB;AAEA,SAAO,UAAUC,IAAV,EAAgB;AACrB,WAAO,UAAUC,MAAV,EAAkB;AACvB,UAAI,CAACR,mBAAmB,CAACS,KAApB,CAA0BD,MAA1B,CAAL,EAAwC;AACtC,eAAON,SAAS,CAACM,MAAD,CAAT,GAAoBA,MAAM,CAACJ,IAAP,CAAYE,QAAZ,CAApB,GAA4CC,IAAI,CAACC,MAAD,CAAvD;AACD;;AAED,aAAON,SAAS,CAACM,MAAM,CAACE,OAAR,CAAT,GAA4BF,MAAM,CAACE,OAAP,CAAeN,IAAf,CAAoB,UAAUO,MAAV,EAAkB;AACvE,eAAOL,QAAQ,CAACnB,QAAQ,CAAC,EAAD,EAAKqB,MAAL,EAAa;AAAEE,UAAAA,OAAO,EAAEC;AAAX,SAAb,CAAT,CAAf;AACD,OAFkC,EAEhC,UAAUC,KAAV,EAAiB;AAClB,eAAON,QAAQ,CAACnB,QAAQ,CAAC,EAAD,EAAKqB,MAAL,EAAa;AAAEE,UAAAA,OAAO,EAAEE,KAAX;AAAkBA,UAAAA,KAAK,EAAE;AAAzB,SAAb,CAAT,CAAf;AACD,OAJkC,CAA5B,GAIFL,IAAI,CAACC,MAAD,CAJT;AAKD,KAVD;AAWD,GAZD;AAaD;;AAEDK,MAAM,CAAC5B,OAAP,GAAiBA,OAAO,CAAC,SAAD,CAAxB","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = promiseMiddleware;\n\nvar _fluxStandardAction = require('flux-standard-action');\n\nfunction isPromise(val) {\n  return val && typeof val.then === 'function';\n}\n\nfunction promiseMiddleware(_ref) {\n  var dispatch = _ref.dispatch;\n\n  return function (next) {\n    return function (action) {\n      if (!_fluxStandardAction.isFSA(action)) {\n        return isPromise(action) ? action.then(dispatch) : next(action);\n      }\n\n      return isPromise(action.payload) ? action.payload.then(function (result) {\n        return dispatch(_extends({}, action, { payload: result }));\n      }, function (error) {\n        return dispatch(_extends({}, action, { payload: error, error: true }));\n      }) : next(action);\n    };\n  };\n}\n\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}