{"ast":null,"code":"'use strict';\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDnd = require('react-dnd');\n\nvar _reactDndHtml5Backend = require('react-dnd-html5-backend');\n\nvar _reactDndHtml5Backend2 = _interopRequireDefault(_reactDndHtml5Backend);\n\nvar _isEqual = require('lodash/isEqual');\n\nvar _isEqual2 = _interopRequireDefault(_isEqual);\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _uniq = require('lodash/uniq');\n\nvar _uniq2 = _interopRequireDefault(_uniq);\n\nvar _Suggestions = require('./Suggestions');\n\nvar _Suggestions2 = _interopRequireDefault(_Suggestions);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _Tag = require('./Tag');\n\nvar _Tag2 = _interopRequireDefault(_Tag);\n\nvar _utils = require('./utils');\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n} //Constants\n\n\nvar ReactTags = function (_Component) {\n  _inherits(ReactTags, _Component);\n\n  function ReactTags(props) {\n    _classCallCheck(this, ReactTags);\n\n    var _this = _possibleConstructorReturn(this, (ReactTags.__proto__ || Object.getPrototypeOf(ReactTags)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    if (!props.inline) {\n      /* eslint-disable no-console */\n      console.warn('[Deprecation] The inline attribute is deprecated and will be removed in v7.x.x, please use inputFieldPosition instead.');\n      /* eslint-enable no-console */\n    }\n\n    var suggestions = props.suggestions;\n    _this.state = {\n      suggestions: suggestions,\n      query: '',\n      isFocused: false,\n      selectedIndex: -1,\n      selectionMode: false\n    };\n    _this.handleFocus = _this.handleFocus.bind(_this);\n    _this.handleBlur = _this.handleBlur.bind(_this);\n    _this.handleKeyDown = _this.handleKeyDown.bind(_this);\n    _this.handleChange = _this.handleChange.bind(_this);\n    _this.moveTag = _this.moveTag.bind(_this);\n    _this.handlePaste = _this.handlePaste.bind(_this);\n    _this.resetAndFocusInput = _this.resetAndFocusInput.bind(_this);\n    _this.handleSuggestionHover = _this.handleSuggestionHover.bind(_this);\n    _this.handleSuggestionClick = _this.handleSuggestionClick.bind(_this);\n    return _this;\n  }\n\n  _createClass(ReactTags, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          autofocus = _props.autofocus,\n          readOnly = _props.readOnly;\n\n      if (autofocus && !readOnly) {\n        this.resetAndFocusInput();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (!(0, _isEqual2.default)(prevProps.suggestions, this.props.suggestions)) {\n        this.updateSuggestions();\n      }\n    }\n  }, {\n    key: 'filteredSuggestions',\n    value: function filteredSuggestions(query, suggestions) {\n      var _this2 = this;\n\n      if (this.props.handleFilterSuggestions) {\n        return this.props.handleFilterSuggestions(query, suggestions);\n      }\n\n      var exactSuggestions = suggestions.filter(function (item) {\n        return _this2.getQueryIndex(query, item) === 0;\n      });\n      var partialSuggestions = suggestions.filter(function (item) {\n        return _this2.getQueryIndex(query, item) > 0;\n      });\n      return exactSuggestions.concat(partialSuggestions);\n    }\n  }, {\n    key: 'resetAndFocusInput',\n    value: function resetAndFocusInput() {\n      this.setState({\n        query: ''\n      });\n\n      if (this.textInput) {\n        this.textInput.value = '';\n        this.textInput.focus();\n      }\n    }\n  }, {\n    key: 'handleDelete',\n    value: function handleDelete(i, e) {\n      this.props.handleDelete(i, e);\n\n      if (!this.props.resetInputOnDelete) {\n        this.textInput && this.textInput.focus();\n      } else {\n        this.resetAndFocusInput();\n      }\n\n      e.stopPropagation();\n    }\n  }, {\n    key: 'handleTagClick',\n    value: function handleTagClick(i, e) {\n      if (this.props.handleTagClick) {\n        this.props.handleTagClick(i, e);\n      }\n\n      if (!this.props.resetInputOnDelete) {\n        this.textInput && this.textInput.focus();\n      } else {\n        this.resetAndFocusInput();\n      }\n    }\n  }, {\n    key: 'handleChange',\n    value: function handleChange(e) {\n      if (this.props.handleInputChange) {\n        this.props.handleInputChange(e.target.value);\n      }\n\n      var query = e.target.value.trim();\n      this.setState({\n        query: query\n      }, this.updateSuggestions);\n    }\n  }, {\n    key: 'handleFocus',\n    value: function handleFocus(e) {\n      var value = e.target.value;\n\n      if (this.props.handleInputFocus) {\n        this.props.handleInputFocus(value);\n      }\n\n      this.setState({\n        isFocused: true\n      });\n    }\n  }, {\n    key: 'handleBlur',\n    value: function handleBlur(e) {\n      var value = e.target.value;\n\n      if (this.props.handleInputBlur) {\n        this.props.handleInputBlur(value);\n\n        if (this.textInput) {\n          this.textInput.value = '';\n        }\n      }\n\n      this.setState({\n        isFocused: false\n      });\n    }\n  }, {\n    key: 'handleKeyDown',\n    value: function handleKeyDown(e) {\n      var _state = this.state,\n          query = _state.query,\n          selectedIndex = _state.selectedIndex,\n          suggestions = _state.suggestions,\n          selectionMode = _state.selectionMode; // hide suggestions menu on escape\n\n      if (e.keyCode === _constants.KEYS.ESCAPE) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n          selectedIndex: -1,\n          selectionMode: false,\n          suggestions: []\n        });\n      } // When one of the terminating keys is pressed, add current query to the tags.\n      // If no text is typed in so far, ignore the action - so we don't end up with a terminating\n      // character typed in.\n\n\n      if (this.props.delimiters.indexOf(e.keyCode) !== -1 && !e.shiftKey) {\n        if (e.keyCode !== _constants.KEYS.TAB || query !== '') {\n          e.preventDefault();\n        }\n\n        var selectedQuery = selectionMode && selectedIndex !== -1 ? suggestions[selectedIndex] : _defineProperty({\n          id: query\n        }, this.props.labelField, query);\n\n        if (selectedQuery !== '') {\n          this.addTag(selectedQuery);\n        }\n      } // when backspace key is pressed and query is blank, delete tag\n\n\n      if (e.keyCode === _constants.KEYS.BACKSPACE && query === '' && this.props.allowDeleteFromEmptyInput) {\n        this.handleDelete(this.props.tags.length - 1, e);\n      } // up arrow\n\n\n      if (e.keyCode === _constants.KEYS.UP_ARROW) {\n        e.preventDefault();\n        this.setState({\n          selectedIndex: selectedIndex <= 0 ? suggestions.length - 1 : selectedIndex - 1,\n          selectionMode: true\n        });\n      } // down arrow\n\n\n      if (e.keyCode === _constants.KEYS.DOWN_ARROW) {\n        e.preventDefault();\n        this.setState({\n          selectedIndex: suggestions.length === 0 ? -1 : (selectedIndex + 1) % suggestions.length,\n          selectionMode: true\n        });\n      }\n    }\n  }, {\n    key: 'handlePaste',\n    value: function handlePaste(e) {\n      var _this3 = this;\n\n      if (!this.props.allowAdditionFromPaste) {\n        return;\n      }\n\n      e.preventDefault();\n      var clipboardData = e.clipboardData || window.clipboardData;\n      var clipboardText = clipboardData.getData('text');\n      var _props$maxLength = this.props.maxLength,\n          maxLength = _props$maxLength === undefined ? clipboardText.length : _props$maxLength;\n      var maxTextLength = Math.min(maxLength, clipboardText.length);\n      var pastedText = clipboardData.getData('text').substr(0, maxTextLength); // Used to determine how the pasted content is split.\n\n      var delimiterRegExp = (0, _utils.buildRegExpFromDelimiters)(this.props.delimiters);\n      var tags = pastedText.split(delimiterRegExp); // Only add unique tags\n\n      (0, _uniq2.default)(tags).forEach(function (tag) {\n        return _this3.addTag(_defineProperty({\n          id: tag\n        }, _this3.props.labelField, tag));\n      });\n    }\n  }, {\n    key: 'handleSuggestionClick',\n    value: function handleSuggestionClick(i) {\n      this.addTag(this.state.suggestions[i]);\n    }\n  }, {\n    key: 'handleSuggestionHover',\n    value: function handleSuggestionHover(i) {\n      this.setState({\n        selectedIndex: i,\n        selectionMode: true\n      });\n    }\n  }, {\n    key: 'moveTag',\n    value: function moveTag(dragIndex, hoverIndex) {\n      var tags = this.props.tags; // locate tags\n\n      var dragTag = tags[dragIndex]; // call handler with the index of the dragged tag\n      // and the tag that is hovered\n\n      this.props.handleDrag(dragTag, dragIndex, hoverIndex);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var tagItems = this.getTagItems();\n\n      var classNames = _extends({}, _constants.DEFAULT_CLASSNAMES, this.props.classNames); // get the suggestions for the given query\n\n\n      var query = this.state.query.trim(),\n          selectedIndex = this.state.selectedIndex,\n          suggestions = this.state.suggestions;\n      var _props2 = this.props,\n          placeholder = _props2.placeholder,\n          inputName = _props2.name,\n          inputId = _props2.id,\n          maxLength = _props2.maxLength,\n          inline = _props2.inline,\n          inputFieldPosition = _props2.inputFieldPosition;\n      var position = !inline ? _constants.INPUT_FIELD_POSITIONS.BOTTOM : inputFieldPosition;\n      var tagInput = !this.props.readOnly ? _react2.default.createElement('div', {\n        className: classNames.tagInput\n      }, _react2.default.createElement('input', {\n        ref: function ref(input) {\n          _this4.textInput = input;\n        },\n        className: classNames.tagInputField,\n        type: 'text',\n        placeholder: placeholder,\n        'aria-label': placeholder,\n        onFocus: this.handleFocus,\n        onBlur: this.handleBlur,\n        onChange: this.handleChange,\n        onKeyDown: this.handleKeyDown,\n        onPaste: this.handlePaste,\n        name: inputName,\n        id: inputId,\n        maxLength: maxLength,\n        value: this.props.inputValue\n      }), _react2.default.createElement(_Suggestions2.default, {\n        query: query,\n        suggestions: suggestions,\n        labelField: this.props.labelField,\n        selectedIndex: selectedIndex,\n        handleClick: this.handleSuggestionClick,\n        handleHover: this.handleSuggestionHover,\n        minQueryLength: this.props.minQueryLength,\n        shouldRenderSuggestions: this.props.shouldRenderSuggestions,\n        isFocused: this.state.isFocused,\n        classNames: classNames,\n        renderSuggestion: this.props.renderSuggestion\n      })) : null;\n      return _react2.default.createElement('div', {\n        className: (0, _classnames2.default)(classNames.tags, 'react-tags-wrapper')\n      }, position === _constants.INPUT_FIELD_POSITIONS.TOP && tagInput, _react2.default.createElement('div', {\n        className: classNames.selected\n      }, tagItems, position === _constants.INPUT_FIELD_POSITIONS.INLINE && tagInput), position === _constants.INPUT_FIELD_POSITIONS.BOTTOM && tagInput);\n    }\n  }]);\n\n  return ReactTags;\n}(_react.Component);\n\nReactTags.propTypes = {\n  placeholder: _propTypes2.default.string,\n  labelField: _propTypes2.default.string,\n  suggestions: _propTypes2.default.arrayOf(_propTypes2.default.shape({\n    id: _propTypes2.default.string.isRequired\n  })),\n  delimiters: _propTypes2.default.arrayOf(_propTypes2.default.number),\n  autofocus: _propTypes2.default.bool,\n  inline: _propTypes2.default.bool,\n  // TODO: Remove in v7.x.x\n  inputFieldPosition: _propTypes2.default.oneOf([_constants.INPUT_FIELD_POSITIONS.INLINE, _constants.INPUT_FIELD_POSITIONS.TOP, _constants.INPUT_FIELD_POSITIONS.BOTTOM]),\n  handleDelete: _propTypes2.default.func,\n  handleAddition: _propTypes2.default.func,\n  handleDrag: _propTypes2.default.func,\n  handleFilterSuggestions: _propTypes2.default.func,\n  handleTagClick: _propTypes2.default.func,\n  allowDeleteFromEmptyInput: _propTypes2.default.bool,\n  allowAdditionFromPaste: _propTypes2.default.bool,\n  allowDragDrop: _propTypes2.default.bool,\n  resetInputOnDelete: _propTypes2.default.bool,\n  handleInputChange: _propTypes2.default.func,\n  handleInputFocus: _propTypes2.default.func,\n  handleInputBlur: _propTypes2.default.func,\n  minQueryLength: _propTypes2.default.number,\n  shouldRenderSuggestions: _propTypes2.default.func,\n  removeComponent: _propTypes2.default.func,\n  autocomplete: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.number]),\n  readOnly: _propTypes2.default.bool,\n  classNames: _propTypes2.default.object,\n  name: _propTypes2.default.string,\n  id: _propTypes2.default.string,\n  maxLength: _propTypes2.default.number,\n  inputValue: _propTypes2.default.string,\n  tags: _propTypes2.default.arrayOf(_propTypes2.default.shape({\n    id: _propTypes2.default.string.isRequired,\n    className: _propTypes2.default.string\n  })),\n  allowUnique: _propTypes2.default.bool,\n  renderSuggestion: _propTypes2.default.func\n};\nReactTags.defaultProps = {\n  placeholder: _constants.DEFAULT_PLACEHOLDER,\n  labelField: _constants.DEFAULT_LABEL_FIELD,\n  suggestions: [],\n  delimiters: [_constants.KEYS.ENTER, _constants.KEYS.TAB],\n  autofocus: true,\n  inline: true,\n  // TODO: Remove in v7.x.x\n  inputFieldPosition: _constants.INPUT_FIELD_POSITIONS.INLINE,\n  handleDelete: _noop2.default,\n  handleAddition: _noop2.default,\n  allowDeleteFromEmptyInput: true,\n  allowAdditionFromPaste: true,\n  resetInputOnDelete: true,\n  autocomplete: false,\n  readOnly: false,\n  allowUnique: true,\n  allowDragDrop: true,\n  tags: []\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.getQueryIndex = function (query, item) {\n    return item[_this5.props.labelField].toLowerCase().indexOf(query.toLowerCase());\n  };\n\n  this.updateSuggestions = function () {\n    var _state2 = _this5.state,\n        query = _state2.query,\n        selectedIndex = _state2.selectedIndex;\n\n    var suggestions = _this5.filteredSuggestions(query, _this5.props.suggestions);\n\n    _this5.setState({\n      suggestions: suggestions,\n      selectedIndex: selectedIndex >= suggestions.length ? suggestions.length - 1 : selectedIndex\n    });\n  };\n\n  this.addTag = function (tag) {\n    var _props3 = _this5.props,\n        tags = _props3.tags,\n        labelField = _props3.labelField,\n        allowUnique = _props3.allowUnique;\n\n    if (!tag.id || !tag[labelField]) {\n      return;\n    }\n\n    var existingKeys = tags.map(function (tag) {\n      return tag.id.toLowerCase();\n    }); // Return if tag has been already added\n\n    if (allowUnique && existingKeys.indexOf(tag.id.toLowerCase()) >= 0) {\n      return;\n    }\n\n    if (_this5.props.autocomplete) {\n      var possibleMatches = _this5.filteredSuggestions(tag[labelField], _this5.props.suggestions);\n\n      if (_this5.props.autocomplete === 1 && possibleMatches.length === 1 || _this5.props.autocomplete === true && possibleMatches.length) {\n        tag = possibleMatches[0];\n      }\n    } // call method to add\n\n\n    _this5.props.handleAddition(tag); // reset the state\n\n\n    _this5.setState({\n      query: '',\n      selectionMode: false,\n      selectedIndex: -1\n    });\n\n    _this5.resetAndFocusInput();\n  };\n\n  this.getTagItems = function () {\n    var _props4 = _this5.props,\n        classNames = _props4.classNames,\n        tags = _props4.tags,\n        labelField = _props4.labelField,\n        removeComponent = _props4.removeComponent,\n        readOnly = _props4.readOnly,\n        allowDragDrop = _props4.allowDragDrop;\n    var moveTag = allowDragDrop ? _this5.moveTag : null;\n    return tags.map(function (tag, index) {\n      return _react2.default.createElement(_Tag2.default, {\n        key: tag.id + '-' + index,\n        index: index,\n        tag: tag,\n        labelField: labelField,\n        onDelete: _this5.handleDelete.bind(_this5, index),\n        moveTag: moveTag,\n        removeComponent: removeComponent,\n        onTagClicked: _this5.handleTagClick.bind(_this5, index),\n        readOnly: readOnly,\n        classNames: _extends({}, _constants.DEFAULT_CLASSNAMES, classNames),\n        allowDragDrop: allowDragDrop\n      });\n    });\n  };\n};\n\nmodule.exports = {\n  WithContext: (0, _reactDnd.DragDropContext)(_reactDndHtml5Backend2.default)(ReactTags),\n  WithOutContext: ReactTags,\n  KEYS: _constants.KEYS\n};","map":{"version":3,"sources":["/Users/johnlinnane/DEV/tc-book/client/node_modules/react-tag-input/dist-modules/components/ReactTags.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_reactDnd","_reactDndHtml5Backend","_reactDndHtml5Backend2","_isEqual","_isEqual2","_noop","_noop2","_uniq","_uniq2","_Suggestions","_Suggestions2","_propTypes","_propTypes2","_classnames","_classnames2","_Tag","_Tag2","_utils","_constants","obj","__esModule","default","_defineProperty","value","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","ReactTags","_Component","_this","getPrototypeOf","_initialiseProps","inline","console","warn","suggestions","state","query","isFocused","selectedIndex","selectionMode","handleFocus","bind","handleBlur","handleKeyDown","handleChange","moveTag","handlePaste","resetAndFocusInput","handleSuggestionHover","handleSuggestionClick","componentDidMount","_props","autofocus","readOnly","componentDidUpdate","prevProps","updateSuggestions","filteredSuggestions","_this2","handleFilterSuggestions","exactSuggestions","filter","item","getQueryIndex","partialSuggestions","concat","setState","textInput","focus","handleDelete","e","resetInputOnDelete","stopPropagation","handleTagClick","handleInputChange","trim","handleInputFocus","handleInputBlur","_state","keyCode","KEYS","ESCAPE","preventDefault","delimiters","indexOf","shiftKey","TAB","selectedQuery","id","labelField","addTag","BACKSPACE","allowDeleteFromEmptyInput","tags","UP_ARROW","DOWN_ARROW","_this3","allowAdditionFromPaste","clipboardData","window","clipboardText","getData","_props$maxLength","maxLength","undefined","maxTextLength","Math","min","pastedText","substr","delimiterRegExp","buildRegExpFromDelimiters","split","forEach","tag","dragIndex","hoverIndex","dragTag","handleDrag","render","_this4","tagItems","getTagItems","classNames","DEFAULT_CLASSNAMES","_props2","placeholder","inputName","name","inputId","inputFieldPosition","position","INPUT_FIELD_POSITIONS","BOTTOM","tagInput","createElement","className","ref","input","tagInputField","type","onFocus","onBlur","onChange","onKeyDown","onPaste","inputValue","handleClick","handleHover","minQueryLength","shouldRenderSuggestions","renderSuggestion","TOP","selected","INLINE","Component","propTypes","string","arrayOf","shape","isRequired","number","bool","oneOf","func","handleAddition","allowDragDrop","removeComponent","autocomplete","oneOfType","object","allowUnique","defaultProps","DEFAULT_PLACEHOLDER","DEFAULT_LABEL_FIELD","ENTER","_this5","toLowerCase","_state2","_props3","existingKeys","map","possibleMatches","_props4","index","onDelete","onTagClicked","module","exports","WithContext","DragDropContext","WithOutContext"],"mappings":"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","sourcesContent":["'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDnd = require('react-dnd');\n\nvar _reactDndHtml5Backend = require('react-dnd-html5-backend');\n\nvar _reactDndHtml5Backend2 = _interopRequireDefault(_reactDndHtml5Backend);\n\nvar _isEqual = require('lodash/isEqual');\n\nvar _isEqual2 = _interopRequireDefault(_isEqual);\n\nvar _noop = require('lodash/noop');\n\nvar _noop2 = _interopRequireDefault(_noop);\n\nvar _uniq = require('lodash/uniq');\n\nvar _uniq2 = _interopRequireDefault(_uniq);\n\nvar _Suggestions = require('./Suggestions');\n\nvar _Suggestions2 = _interopRequireDefault(_Suggestions);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _Tag = require('./Tag');\n\nvar _Tag2 = _interopRequireDefault(_Tag);\n\nvar _utils = require('./utils');\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n//Constants\n\n\nvar ReactTags = function (_Component) {\n  _inherits(ReactTags, _Component);\n\n  function ReactTags(props) {\n    _classCallCheck(this, ReactTags);\n\n    var _this = _possibleConstructorReturn(this, (ReactTags.__proto__ || Object.getPrototypeOf(ReactTags)).call(this, props));\n\n    _initialiseProps.call(_this);\n\n    if (!props.inline) {\n      /* eslint-disable no-console */\n      console.warn('[Deprecation] The inline attribute is deprecated and will be removed in v7.x.x, please use inputFieldPosition instead.');\n      /* eslint-enable no-console */\n    }\n\n    var suggestions = props.suggestions;\n\n    _this.state = {\n      suggestions: suggestions,\n      query: '',\n      isFocused: false,\n      selectedIndex: -1,\n      selectionMode: false\n    };\n    _this.handleFocus = _this.handleFocus.bind(_this);\n    _this.handleBlur = _this.handleBlur.bind(_this);\n    _this.handleKeyDown = _this.handleKeyDown.bind(_this);\n    _this.handleChange = _this.handleChange.bind(_this);\n    _this.moveTag = _this.moveTag.bind(_this);\n    _this.handlePaste = _this.handlePaste.bind(_this);\n    _this.resetAndFocusInput = _this.resetAndFocusInput.bind(_this);\n    _this.handleSuggestionHover = _this.handleSuggestionHover.bind(_this);\n    _this.handleSuggestionClick = _this.handleSuggestionClick.bind(_this);\n    return _this;\n  }\n\n  _createClass(ReactTags, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          autofocus = _props.autofocus,\n          readOnly = _props.readOnly;\n\n\n      if (autofocus && !readOnly) {\n        this.resetAndFocusInput();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (!(0, _isEqual2.default)(prevProps.suggestions, this.props.suggestions)) {\n        this.updateSuggestions();\n      }\n    }\n  }, {\n    key: 'filteredSuggestions',\n    value: function filteredSuggestions(query, suggestions) {\n      var _this2 = this;\n\n      if (this.props.handleFilterSuggestions) {\n        return this.props.handleFilterSuggestions(query, suggestions);\n      }\n\n      var exactSuggestions = suggestions.filter(function (item) {\n        return _this2.getQueryIndex(query, item) === 0;\n      });\n      var partialSuggestions = suggestions.filter(function (item) {\n        return _this2.getQueryIndex(query, item) > 0;\n      });\n      return exactSuggestions.concat(partialSuggestions);\n    }\n  }, {\n    key: 'resetAndFocusInput',\n    value: function resetAndFocusInput() {\n      this.setState({ query: '' });\n      if (this.textInput) {\n        this.textInput.value = '';\n        this.textInput.focus();\n      }\n    }\n  }, {\n    key: 'handleDelete',\n    value: function handleDelete(i, e) {\n      this.props.handleDelete(i, e);\n      if (!this.props.resetInputOnDelete) {\n        this.textInput && this.textInput.focus();\n      } else {\n        this.resetAndFocusInput();\n      }\n      e.stopPropagation();\n    }\n  }, {\n    key: 'handleTagClick',\n    value: function handleTagClick(i, e) {\n      if (this.props.handleTagClick) {\n        this.props.handleTagClick(i, e);\n      }\n      if (!this.props.resetInputOnDelete) {\n        this.textInput && this.textInput.focus();\n      } else {\n        this.resetAndFocusInput();\n      }\n    }\n  }, {\n    key: 'handleChange',\n    value: function handleChange(e) {\n      if (this.props.handleInputChange) {\n        this.props.handleInputChange(e.target.value);\n      }\n\n      var query = e.target.value.trim();\n\n      this.setState({ query: query }, this.updateSuggestions);\n    }\n  }, {\n    key: 'handleFocus',\n    value: function handleFocus(e) {\n      var value = e.target.value;\n      if (this.props.handleInputFocus) {\n        this.props.handleInputFocus(value);\n      }\n      this.setState({ isFocused: true });\n    }\n  }, {\n    key: 'handleBlur',\n    value: function handleBlur(e) {\n      var value = e.target.value;\n      if (this.props.handleInputBlur) {\n        this.props.handleInputBlur(value);\n        if (this.textInput) {\n          this.textInput.value = '';\n        }\n      }\n      this.setState({ isFocused: false });\n    }\n  }, {\n    key: 'handleKeyDown',\n    value: function handleKeyDown(e) {\n      var _state = this.state,\n          query = _state.query,\n          selectedIndex = _state.selectedIndex,\n          suggestions = _state.suggestions,\n          selectionMode = _state.selectionMode;\n\n      // hide suggestions menu on escape\n\n      if (e.keyCode === _constants.KEYS.ESCAPE) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.setState({\n          selectedIndex: -1,\n          selectionMode: false,\n          suggestions: []\n        });\n      }\n\n      // When one of the terminating keys is pressed, add current query to the tags.\n      // If no text is typed in so far, ignore the action - so we don't end up with a terminating\n      // character typed in.\n      if (this.props.delimiters.indexOf(e.keyCode) !== -1 && !e.shiftKey) {\n        if (e.keyCode !== _constants.KEYS.TAB || query !== '') {\n          e.preventDefault();\n        }\n\n        var selectedQuery = selectionMode && selectedIndex !== -1 ? suggestions[selectedIndex] : _defineProperty({ id: query }, this.props.labelField, query);\n\n        if (selectedQuery !== '') {\n          this.addTag(selectedQuery);\n        }\n      }\n\n      // when backspace key is pressed and query is blank, delete tag\n      if (e.keyCode === _constants.KEYS.BACKSPACE && query === '' && this.props.allowDeleteFromEmptyInput) {\n        this.handleDelete(this.props.tags.length - 1, e);\n      }\n\n      // up arrow\n      if (e.keyCode === _constants.KEYS.UP_ARROW) {\n        e.preventDefault();\n        this.setState({\n          selectedIndex: selectedIndex <= 0 ? suggestions.length - 1 : selectedIndex - 1,\n          selectionMode: true\n        });\n      }\n\n      // down arrow\n      if (e.keyCode === _constants.KEYS.DOWN_ARROW) {\n        e.preventDefault();\n        this.setState({\n          selectedIndex: suggestions.length === 0 ? -1 : (selectedIndex + 1) % suggestions.length,\n          selectionMode: true\n        });\n      }\n    }\n  }, {\n    key: 'handlePaste',\n    value: function handlePaste(e) {\n      var _this3 = this;\n\n      if (!this.props.allowAdditionFromPaste) {\n        return;\n      }\n\n      e.preventDefault();\n\n      var clipboardData = e.clipboardData || window.clipboardData;\n      var clipboardText = clipboardData.getData('text');\n\n      var _props$maxLength = this.props.maxLength,\n          maxLength = _props$maxLength === undefined ? clipboardText.length : _props$maxLength;\n\n\n      var maxTextLength = Math.min(maxLength, clipboardText.length);\n      var pastedText = clipboardData.getData('text').substr(0, maxTextLength);\n\n      // Used to determine how the pasted content is split.\n      var delimiterRegExp = (0, _utils.buildRegExpFromDelimiters)(this.props.delimiters);\n      var tags = pastedText.split(delimiterRegExp);\n\n      // Only add unique tags\n      (0, _uniq2.default)(tags).forEach(function (tag) {\n        return _this3.addTag(_defineProperty({ id: tag }, _this3.props.labelField, tag));\n      });\n    }\n  }, {\n    key: 'handleSuggestionClick',\n    value: function handleSuggestionClick(i) {\n      this.addTag(this.state.suggestions[i]);\n    }\n  }, {\n    key: 'handleSuggestionHover',\n    value: function handleSuggestionHover(i) {\n      this.setState({\n        selectedIndex: i,\n        selectionMode: true\n      });\n    }\n  }, {\n    key: 'moveTag',\n    value: function moveTag(dragIndex, hoverIndex) {\n      var tags = this.props.tags;\n\n      // locate tags\n      var dragTag = tags[dragIndex];\n\n      // call handler with the index of the dragged tag\n      // and the tag that is hovered\n      this.props.handleDrag(dragTag, dragIndex, hoverIndex);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var tagItems = this.getTagItems();\n      var classNames = _extends({}, _constants.DEFAULT_CLASSNAMES, this.props.classNames);\n\n      // get the suggestions for the given query\n      var query = this.state.query.trim(),\n          selectedIndex = this.state.selectedIndex,\n          suggestions = this.state.suggestions;\n\n      var _props2 = this.props,\n          placeholder = _props2.placeholder,\n          inputName = _props2.name,\n          inputId = _props2.id,\n          maxLength = _props2.maxLength,\n          inline = _props2.inline,\n          inputFieldPosition = _props2.inputFieldPosition;\n\n\n      var position = !inline ? _constants.INPUT_FIELD_POSITIONS.BOTTOM : inputFieldPosition;\n\n      var tagInput = !this.props.readOnly ? _react2.default.createElement(\n        'div',\n        { className: classNames.tagInput },\n        _react2.default.createElement('input', {\n          ref: function ref(input) {\n            _this4.textInput = input;\n          },\n          className: classNames.tagInputField,\n          type: 'text',\n          placeholder: placeholder,\n          'aria-label': placeholder,\n          onFocus: this.handleFocus,\n          onBlur: this.handleBlur,\n          onChange: this.handleChange,\n          onKeyDown: this.handleKeyDown,\n          onPaste: this.handlePaste,\n          name: inputName,\n          id: inputId,\n          maxLength: maxLength,\n          value: this.props.inputValue\n        }),\n        _react2.default.createElement(_Suggestions2.default, {\n          query: query,\n          suggestions: suggestions,\n          labelField: this.props.labelField,\n          selectedIndex: selectedIndex,\n          handleClick: this.handleSuggestionClick,\n          handleHover: this.handleSuggestionHover,\n          minQueryLength: this.props.minQueryLength,\n          shouldRenderSuggestions: this.props.shouldRenderSuggestions,\n          isFocused: this.state.isFocused,\n          classNames: classNames,\n          renderSuggestion: this.props.renderSuggestion\n        })\n      ) : null;\n\n      return _react2.default.createElement(\n        'div',\n        { className: (0, _classnames2.default)(classNames.tags, 'react-tags-wrapper') },\n        position === _constants.INPUT_FIELD_POSITIONS.TOP && tagInput,\n        _react2.default.createElement(\n          'div',\n          { className: classNames.selected },\n          tagItems,\n          position === _constants.INPUT_FIELD_POSITIONS.INLINE && tagInput\n        ),\n        position === _constants.INPUT_FIELD_POSITIONS.BOTTOM && tagInput\n      );\n    }\n  }]);\n\n  return ReactTags;\n}(_react.Component);\n\nReactTags.propTypes = {\n  placeholder: _propTypes2.default.string,\n  labelField: _propTypes2.default.string,\n  suggestions: _propTypes2.default.arrayOf(_propTypes2.default.shape({\n    id: _propTypes2.default.string.isRequired\n  })),\n  delimiters: _propTypes2.default.arrayOf(_propTypes2.default.number),\n  autofocus: _propTypes2.default.bool,\n  inline: _propTypes2.default.bool, // TODO: Remove in v7.x.x\n  inputFieldPosition: _propTypes2.default.oneOf([_constants.INPUT_FIELD_POSITIONS.INLINE, _constants.INPUT_FIELD_POSITIONS.TOP, _constants.INPUT_FIELD_POSITIONS.BOTTOM]),\n  handleDelete: _propTypes2.default.func,\n  handleAddition: _propTypes2.default.func,\n  handleDrag: _propTypes2.default.func,\n  handleFilterSuggestions: _propTypes2.default.func,\n  handleTagClick: _propTypes2.default.func,\n  allowDeleteFromEmptyInput: _propTypes2.default.bool,\n  allowAdditionFromPaste: _propTypes2.default.bool,\n  allowDragDrop: _propTypes2.default.bool,\n  resetInputOnDelete: _propTypes2.default.bool,\n  handleInputChange: _propTypes2.default.func,\n  handleInputFocus: _propTypes2.default.func,\n  handleInputBlur: _propTypes2.default.func,\n  minQueryLength: _propTypes2.default.number,\n  shouldRenderSuggestions: _propTypes2.default.func,\n  removeComponent: _propTypes2.default.func,\n  autocomplete: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.number]),\n  readOnly: _propTypes2.default.bool,\n  classNames: _propTypes2.default.object,\n  name: _propTypes2.default.string,\n  id: _propTypes2.default.string,\n  maxLength: _propTypes2.default.number,\n  inputValue: _propTypes2.default.string,\n  tags: _propTypes2.default.arrayOf(_propTypes2.default.shape({\n    id: _propTypes2.default.string.isRequired,\n    className: _propTypes2.default.string\n  })),\n  allowUnique: _propTypes2.default.bool,\n  renderSuggestion: _propTypes2.default.func\n};\nReactTags.defaultProps = {\n  placeholder: _constants.DEFAULT_PLACEHOLDER,\n  labelField: _constants.DEFAULT_LABEL_FIELD,\n  suggestions: [],\n  delimiters: [_constants.KEYS.ENTER, _constants.KEYS.TAB],\n  autofocus: true,\n  inline: true, // TODO: Remove in v7.x.x\n  inputFieldPosition: _constants.INPUT_FIELD_POSITIONS.INLINE,\n  handleDelete: _noop2.default,\n  handleAddition: _noop2.default,\n  allowDeleteFromEmptyInput: true,\n  allowAdditionFromPaste: true,\n  resetInputOnDelete: true,\n  autocomplete: false,\n  readOnly: false,\n  allowUnique: true,\n  allowDragDrop: true,\n  tags: []\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this5 = this;\n\n  this.getQueryIndex = function (query, item) {\n    return item[_this5.props.labelField].toLowerCase().indexOf(query.toLowerCase());\n  };\n\n  this.updateSuggestions = function () {\n    var _state2 = _this5.state,\n        query = _state2.query,\n        selectedIndex = _state2.selectedIndex;\n\n    var suggestions = _this5.filteredSuggestions(query, _this5.props.suggestions);\n\n    _this5.setState({\n      suggestions: suggestions,\n      selectedIndex: selectedIndex >= suggestions.length ? suggestions.length - 1 : selectedIndex\n    });\n  };\n\n  this.addTag = function (tag) {\n    var _props3 = _this5.props,\n        tags = _props3.tags,\n        labelField = _props3.labelField,\n        allowUnique = _props3.allowUnique;\n\n    if (!tag.id || !tag[labelField]) {\n      return;\n    }\n    var existingKeys = tags.map(function (tag) {\n      return tag.id.toLowerCase();\n    });\n\n    // Return if tag has been already added\n    if (allowUnique && existingKeys.indexOf(tag.id.toLowerCase()) >= 0) {\n      return;\n    }\n    if (_this5.props.autocomplete) {\n      var possibleMatches = _this5.filteredSuggestions(tag[labelField], _this5.props.suggestions);\n\n      if (_this5.props.autocomplete === 1 && possibleMatches.length === 1 || _this5.props.autocomplete === true && possibleMatches.length) {\n        tag = possibleMatches[0];\n      }\n    }\n\n    // call method to add\n    _this5.props.handleAddition(tag);\n\n    // reset the state\n    _this5.setState({\n      query: '',\n      selectionMode: false,\n      selectedIndex: -1\n    });\n\n    _this5.resetAndFocusInput();\n  };\n\n  this.getTagItems = function () {\n    var _props4 = _this5.props,\n        classNames = _props4.classNames,\n        tags = _props4.tags,\n        labelField = _props4.labelField,\n        removeComponent = _props4.removeComponent,\n        readOnly = _props4.readOnly,\n        allowDragDrop = _props4.allowDragDrop;\n\n\n    var moveTag = allowDragDrop ? _this5.moveTag : null;\n    return tags.map(function (tag, index) {\n      return _react2.default.createElement(_Tag2.default, {\n        key: tag.id + '-' + index,\n        index: index,\n        tag: tag,\n        labelField: labelField,\n        onDelete: _this5.handleDelete.bind(_this5, index),\n        moveTag: moveTag,\n        removeComponent: removeComponent,\n        onTagClicked: _this5.handleTagClick.bind(_this5, index),\n        readOnly: readOnly,\n        classNames: _extends({}, _constants.DEFAULT_CLASSNAMES, classNames),\n        allowDragDrop: allowDragDrop\n      });\n    });\n  };\n};\n\nmodule.exports = {\n  WithContext: (0, _reactDnd.DragDropContext)(_reactDndHtml5Backend2.default)(ReactTags),\n  WithOutContext: ReactTags,\n  KEYS: _constants.KEYS\n};"]},"metadata":{},"sourceType":"script"}