{"ast":null,"code":"import _toConsumableArray from\"/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import axios from'axios';export function getBooks(){var limit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:10;var start=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var order=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'asc';var list=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';var request=axios.get(\"/api/books?limit=\".concat(limit,\"&skip=\").concat(start,\"&order=\").concat(order)).then(function(response){if(list){return[].concat(_toConsumableArray(list),_toConsumableArray(response.data));}else{return response.data;}});// console.log(request);\nreturn{type:'GET_BOOKS',payload:request};}// two requests inside one action, book and user. user reduxthunk\nexport function getBookWithReviewer(id){// reduxthunk's dispatched function sends payload to reducers whenever we are ready\n// as an alternative to getBooks\nvar request=axios.get(\"/api/getBook?id=\".concat(id));// return a dispatch function\nreturn function(dispatch){// get the promise, using {{{destructuring}}}\nrequest.then(function(_ref){var data=_ref.data;var book=data;// console.log(book);\naxios.get(\"/api/getReviewer?id=\".concat(book.ownerId)).then(function(_ref2){var data=_ref2.data;var response={book:book,reviewer:data};// console.log(response);\n// only gets executed when ready\ndispatch({type:'GET_BOOK_W_REVIEWER',payload:response});});});};}export function clearBookWithReviewer(){return{type:'CLEAR_BOOK_W_REVIEWER',payload:{book:{},reviewer:{}}};}// book arg is json data\nexport function addBook(book){var request=axios.post('/api/book',book).then(function(response){return response.data;});return{type:'ADD_BOOK',payload:request};}export function clearNewBook(){return{type:'CLEAR_NEWBOOK',payload:null};}// get every post of particular user\nexport function getUserPosts(userId){var request=axios.get(\"/api/user_posts?user=\".concat(userId)).then(function(response){return response.data;});return{type:'GET_USER_POSTS',payload:request};}// ******************** EDIT REVIEW ********************\nexport function getBook(id){var request=axios.get(\"/api/getBook?id=\".concat(id)).then(function(response){return response.data;});return{type:'GET_BOOK',payload:request};}export function updateBook(data){var request=axios.post(\"/api/book_update\",data).then(function(response){return response.data;});return{type:'UPDATE_BOOK',payload:request};}export function deleteBook(id){var request=axios.delete(\"/api/delete_book?id=\".concat(id)).then(function(response){return response.data;});return{type:'DELETE_BOOK',payload:request};}export function clearBook(){return{type:'CLEAR_BOOK',payload:{book:null,updateBook:false,postDeleted:false}};}// ******************** USER ACTIONS ********************\nexport function loginUser(_ref3){var email=_ref3.email,password=_ref3.password;var request=axios.post('/api/login',{email:email,password:password}).then(function(response){return response.data;});return{type:'USER_LOGIN',payload:request};}export function auth(){var request=axios.get('/api/auth').then(function(response){return response.data;});return{type:'USER_AUTH',payload:request};}export function getUsers(){var request=axios.get(\"/api/users\").then(function(response){return response.data;});return{type:'GET_USER',payload:request};}// uses thunk\nexport function userRegister(user,userList){var request=axios.post(\"/api/register\",user);return function(dispatch){request.then(function(_ref4){var data=_ref4.data;// if register is wrong, don't send new user\nvar users=data.success?[].concat(_toConsumableArray(userList),[data.user]):userList;var response={success:data.success,users:users// result of conditional\n};dispatch({type:'USER_REGISTER',payload:response});});};}","map":{"version":3,"sources":["/Users/johnlinnane/DEV/react-bootcamp/13_book_shelf/client/src/actions/index.js"],"names":["axios","getBooks","limit","start","order","list","request","get","then","response","data","type","payload","getBookWithReviewer","id","dispatch","book","ownerId","reviewer","clearBookWithReviewer","addBook","post","clearNewBook","getUserPosts","userId","getBook","updateBook","deleteBook","delete","clearBook","postDeleted","loginUser","email","password","auth","getUsers","userRegister","user","userList","users","success"],"mappings":"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","sourcesContent":["import axios from 'axios';\n\n\n\nexport function getBooks(\n    limit = 10,\n    start = 0,\n    order = 'asc',\n    list = ''\n) {\n    const request = axios.get(`/api/books?limit=${limit}&skip=${start}&order=${order}`)\n                        .then(response => {\n                            if(list){\n                                return [...list, ...response.data]\n                            } else {\n                                return response.data\n                            }\n                        })\n\n    // console.log(request);\n\n    return{\n        type:'GET_BOOKS',\n        payload:request\n    }\n}\n\n\n// two requests inside one action, book and user. user reduxthunk\nexport function getBookWithReviewer(id) {\n\n    // reduxthunk's dispatched function sends payload to reducers whenever we are ready\n    // as an alternative to getBooks\n    const request = axios.get(`/api/getBook?id=${id}`)\n\n    // return a dispatch function\n    return (dispatch) => {\n\n        // get the promise, using {{{destructuring}}}\n        request.then(({data}) => {\n            let book = data;\n            // console.log(book);\n\n            axios.get(`/api/getReviewer?id=${book.ownerId}`)\n                .then(({data}) => {\n                \n                    let response = {\n                        book, \n                        reviewer:data\n                    }\n\n                    // console.log(response);\n\n                    // only gets executed when ready\n                    dispatch({\n                        type:'GET_BOOK_W_REVIEWER',\n                        payload:response\n                    })\n                })\n        })\n    }\n}\n\nexport function clearBookWithReviewer() {\n    return {\n        type:'CLEAR_BOOK_W_REVIEWER',\n        payload:{\n            book:{},\n            reviewer:{}\n        }\n    }\n}\n\n// book arg is json data\nexport function addBook(book) {\n    const request = axios.post('/api/book', book)\n                        .then(response => response.data);\n\n    return {\n        type: 'ADD_BOOK',\n        payload:request\n    }\n}\n\n\nexport function clearNewBook() {\n    return {\n        type:'CLEAR_NEWBOOK',\n        payload:null\n    }\n}\n\n// get every post of particular user\nexport function getUserPosts(userId) {\n    const request = axios.get(`/api/user_posts?user=${userId}`)\n                        .then(response => response.data);\n    return {\n        type:'GET_USER_POSTS',\n        payload:request\n    }\n}\n\n\n// ******************** EDIT REVIEW ********************\n\nexport function getBook(id) {\n    const request = axios.get(`/api/getBook?id=${id}`)\n                        .then(response => response.data);\n\n    return {\n        type:'GET_BOOK',\n        payload:request\n    }\n}\n\n\nexport function updateBook(data) {\n    const request = axios.post(`/api/book_update`, data)\n                        .then(response => response.data);\n    return {\n        type:'UPDATE_BOOK',\n        payload:request\n    }\n}\n\nexport function deleteBook(id) {\n    const request = axios.delete(`/api/delete_book?id=${id}`)\n                        .then(response => response.data)\n    return {\n        type:'DELETE_BOOK',\n        payload:request\n    }\n}\n\nexport function clearBook() {\n    return {\n        type:'CLEAR_BOOK',\n        payload: {\n            book: null,\n            updateBook:false,\n            postDeleted:false\n        }\n    }\n}\n\n\n\n// ******************** USER ACTIONS ********************\n\nexport function loginUser({email, password}) {\n\n    const request = axios.post('/api/login', {email, password})\n                        .then(response => response.data);\n\n    return {\n        type:'USER_LOGIN',\n        payload:request\n    }\n}\n\n\nexport function auth() {\n    const request = axios.get('/api/auth') \n                        .then(response => response.data);\n\n    return {\n        type:'USER_AUTH',\n        payload:request\n    }\n\n}\n\n\n\nexport function getUsers() {\n    const request = axios.get(`/api/users`)\n                        .then(response => response.data);\n\n    return {\n        type:'GET_USER',\n        payload:request\n    }\n\n}\n\n// uses thunk\nexport function userRegister(user, userList) {\n    const request = axios.post(`/api/register`, user);\n\n    return (dispatch) => {\n        request.then(({data}) => {\n\n            // if register is wrong, don't send new user\n            let users = data.success ? [...userList, data.user] : userList;\n\n            let response = {\n                success:data.success,\n                users    // result of conditional\n            }\n\n            dispatch({\n                type:'USER_REGISTER',\n                payload:response\n            })\n        })\n    }\n}"]},"metadata":{},"sourceType":"module"}