{"ast":null,"code":"\"use strict\";\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar NativeTypes = __importStar(require(\"./NativeTypes\"));\n\nfunction getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n  var result = typesToTry.reduce(function (resultSoFar, typeToTry) {\n    return resultSoFar || dataTransfer.getData(typeToTry);\n  }, null);\n  return result != null // eslint-disable-line eqeqeq\n  ? result : defaultValue;\n}\n\nvar nativeTypesConfig = (_a = {}, _a[NativeTypes.FILE] = {\n  exposeProperty: 'files',\n  matchesTypes: ['Files'],\n  getData: function (dataTransfer) {\n    return Array.prototype.slice.call(dataTransfer.files);\n  }\n}, _a[NativeTypes.URL] = {\n  exposeProperty: 'urls',\n  matchesTypes: ['Url', 'text/uri-list'],\n  getData: function (dataTransfer, matchesTypes) {\n    return getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n');\n  }\n}, _a[NativeTypes.TEXT] = {\n  exposeProperty: 'text',\n  matchesTypes: ['Text', 'text/plain'],\n  getData: function (dataTransfer, matchesTypes) {\n    return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n  }\n}, _a);\n\nfunction createNativeDragSource(type) {\n  var _a = nativeTypesConfig[type],\n      exposeProperty = _a.exposeProperty,\n      matchesTypes = _a.matchesTypes,\n      getData = _a.getData;\n  return (\n    /** @class */\n    function () {\n      function NativeDragSource() {\n        this.item = (_a = {}, Object.defineProperty(_a, exposeProperty, {\n          get: function () {\n            // tslint:disable-next-line no-console\n            console.warn(\"Browser doesn't allow reading \\\"\" + exposeProperty + \"\\\" until the drop event.\");\n            return null;\n          },\n          enumerable: true,\n          configurable: true\n        }), _a);\n\n        var _a;\n      }\n\n      NativeDragSource.prototype.mutateItemByReadingDataTransfer = function (dataTransfer) {\n        delete this.item[exposeProperty];\n        this.item[exposeProperty] = getData(dataTransfer, matchesTypes);\n      };\n\n      NativeDragSource.prototype.canDrag = function () {\n        return true;\n      };\n\n      NativeDragSource.prototype.beginDrag = function () {\n        return this.item;\n      };\n\n      NativeDragSource.prototype.isDragging = function (monitor, handle) {\n        return handle === monitor.getSourceId();\n      };\n\n      NativeDragSource.prototype.endDrag = function () {// empty\n      };\n\n      return NativeDragSource;\n    }()\n  );\n}\n\nexports.createNativeDragSource = createNativeDragSource;\n\nfunction matchNativeItemType(dataTransfer) {\n  var dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n  return Object.keys(nativeTypesConfig).filter(function (nativeItemType) {\n    var matchesTypes = nativeTypesConfig[nativeItemType].matchesTypes;\n    return matchesTypes.some(function (t) {\n      return dataTransferTypes.indexOf(t) > -1;\n    });\n  })[0] || null;\n}\n\nexports.matchNativeItemType = matchNativeItemType;\n\nvar _a;","map":{"version":3,"sources":["../src/NativeDragSources.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar NativeTypes = __importStar(require(\"./NativeTypes\"));\nfunction getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n    var result = typesToTry.reduce(function (resultSoFar, typeToTry) { return resultSoFar || dataTransfer.getData(typeToTry); }, null);\n    return result != null // eslint-disable-line eqeqeq\n        ? result\n        : defaultValue;\n}\nvar nativeTypesConfig = (_a = {},\n    _a[NativeTypes.FILE] = {\n        exposeProperty: 'files',\n        matchesTypes: ['Files'],\n        getData: function (dataTransfer) {\n            return Array.prototype.slice.call(dataTransfer.files);\n        },\n    },\n    _a[NativeTypes.URL] = {\n        exposeProperty: 'urls',\n        matchesTypes: ['Url', 'text/uri-list'],\n        getData: function (dataTransfer, matchesTypes) {\n            return getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n');\n        },\n    },\n    _a[NativeTypes.TEXT] = {\n        exposeProperty: 'text',\n        matchesTypes: ['Text', 'text/plain'],\n        getData: function (dataTransfer, matchesTypes) {\n            return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n        },\n    },\n    _a);\nfunction createNativeDragSource(type) {\n    var _a = nativeTypesConfig[type], exposeProperty = _a.exposeProperty, matchesTypes = _a.matchesTypes, getData = _a.getData;\n    return /** @class */ (function () {\n        function NativeDragSource() {\n            this.item = (_a = {},\n                Object.defineProperty(_a, exposeProperty, {\n                    get: function () {\n                        // tslint:disable-next-line no-console\n                        console.warn(\"Browser doesn't allow reading \\\"\" + exposeProperty + \"\\\" until the drop event.\");\n                        return null;\n                    },\n                    enumerable: true,\n                    configurable: true\n                }),\n                _a);\n            var _a;\n        }\n        NativeDragSource.prototype.mutateItemByReadingDataTransfer = function (dataTransfer) {\n            delete this.item[exposeProperty];\n            this.item[exposeProperty] = getData(dataTransfer, matchesTypes);\n        };\n        NativeDragSource.prototype.canDrag = function () {\n            return true;\n        };\n        NativeDragSource.prototype.beginDrag = function () {\n            return this.item;\n        };\n        NativeDragSource.prototype.isDragging = function (monitor, handle) {\n            return handle === monitor.getSourceId();\n        };\n        NativeDragSource.prototype.endDrag = function () {\n            // empty\n        };\n        return NativeDragSource;\n    }());\n}\nexports.createNativeDragSource = createNativeDragSource;\nfunction matchNativeItemType(dataTransfer) {\n    var dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n    return (Object.keys(nativeTypesConfig).filter(function (nativeItemType) {\n        var matchesTypes = nativeTypesConfig[nativeItemType].matchesTypes;\n        return matchesTypes.some(function (t) { return dataTransferTypes.indexOf(t) > -1; });\n    })[0] || null);\n}\nexports.matchNativeItemType = matchNativeItemType;\nvar _a;\n//# sourceMappingURL=NativeDragSources.js.map"]},"metadata":{},"sourceType":"script"}